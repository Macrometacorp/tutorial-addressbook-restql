{"version":3,"file":"graph.js","sourceRoot":"","sources":["../../src/graph.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  C8Collection,\n  BaseCollection,\n  CollectionType,\n  DocumentHandle,\n  DOCUMENT_NOT_FOUND,\n  EdgeCollection,\n  isC8Collection\n} from \"./collection\";\nimport { Connection } from \"./connection\";\nimport { isC8Error } from \"./error\";\n\nexport class GraphVertexCollection extends BaseCollection {\n  type = CollectionType.DOCUMENT_COLLECTION;\n\n  graph: Graph;\n\n  constructor(connection: Connection, name: string, graph: Graph) {\n    super(connection, name);\n    this.graph = graph;\n  }\n\n  document(\n    documentHandle: DocumentHandle,\n    graceful: boolean = false\n  ): Promise<any> {\n    const result = this._connection.request(\n      {\n        path: `/graph/${this.graph.name}/vertex/${this._documentHandle(\n          documentHandle\n        )}`\n      },\n      res => res.body.vertex\n    );\n    if (!graceful) return result;\n    return result.catch(err => {\n      if (isC8Error(err) && err.errorNum === DOCUMENT_NOT_FOUND) {\n        return null;\n      }\n      throw err;\n    });\n  }\n\n  vertex(\n    documentHandle: DocumentHandle,\n    graceful: boolean = false\n  ): Promise<any> {\n    return this.document(documentHandle, graceful);\n  }\n\n  save(data: any, opts?: { waitForSync?: boolean }) {\n    return this._connection.request(\n      {\n        method: \"POST\",\n        path: `/graph/${this.graph.name}/vertex/${this.name}`,\n        body: data,\n        qs: opts\n      },\n      res => res.body.vertex\n    );\n  }\n\n  replace(documentHandle: DocumentHandle, newValue: any, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    return this._connection.request(\n      {\n        method: \"PUT\",\n        path: `/graph/${this.graph.name}/vertex/${this._documentHandle(\n          documentHandle\n        )}`,\n        body: newValue,\n        qs: opts,\n        headers\n      },\n      res => res.body.vertex\n    );\n  }\n\n  update(documentHandle: DocumentHandle, newValue: any, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    return this._connection.request(\n      {\n        method: \"PATCH\",\n        path: `/graph/${this.graph.name}/vertex/${this._documentHandle(\n          documentHandle\n        )}`,\n        body: newValue,\n        qs: opts,\n        headers\n      },\n      res => res.body.vertex\n    );\n  }\n\n  remove(documentHandle: DocumentHandle, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    return this._connection.request(\n      {\n        method: \"DELETE\",\n        path: `/graph/${this.graph.name}/vertex/${this._documentHandle(\n          documentHandle\n        )}`,\n        qs: opts,\n        headers\n      },\n      res => res.body.removed\n    );\n  }\n}\n\nexport class GraphEdgeCollection extends EdgeCollection {\n  type = CollectionType.EDGE_COLLECTION;\n\n  graph: Graph;\n\n  constructor(connection: Connection, name: string, graph: Graph) {\n    super(connection, name);\n    this.type = CollectionType.EDGE_COLLECTION;\n    this.graph = graph;\n  }\n\n  document(\n    documentHandle: DocumentHandle,\n    graceful: boolean = false\n  ): Promise<any> {\n    const result = this._connection.request(\n      {\n        path: `/graph/${this.graph.name}/edge/${this._documentHandle(\n          documentHandle\n        )}`\n      },\n      res => res.body.edge\n    );\n    if (!graceful) return result;\n    return result.catch(err => {\n      if (isC8Error(err) && err.errorNum === DOCUMENT_NOT_FOUND) {\n        return null;\n      }\n      throw err;\n    });\n  }\n\n  save(data: any, opts?: { waitForSync?: boolean }): Promise<any>;\n  save(\n    data: any,\n    fromId: DocumentHandle,\n    toId: DocumentHandle,\n    opts?: { waitForSync?: boolean }\n  ): Promise<any>;\n  save(\n    data: any,\n    fromId?: DocumentHandle | any,\n    toId?: DocumentHandle,\n    opts?: { waitForSync?: boolean }\n  ) {\n    if (fromId !== undefined) {\n      if (toId !== undefined) {\n        data._from = this._documentHandle(fromId);\n        data._to = this._documentHandle(toId!);\n      } else {\n        opts = fromId;\n      }\n    }\n    return this._connection.request(\n      {\n        method: \"POST\",\n        path: `/graph/${this.graph.name}/edge/${this.name}`,\n        body: data,\n        qs: opts\n      },\n      res => res.body.edge\n    );\n  }\n\n  replace(documentHandle: DocumentHandle, newValue: any, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    return this._connection.request(\n      {\n        method: \"PUT\",\n        path: `/graph/${this.graph.name}/edge/${this._documentHandle(\n          documentHandle\n        )}`,\n        body: newValue,\n        qs: opts,\n        headers\n      },\n      res => res.body.edge\n    );\n  }\n\n  update(documentHandle: DocumentHandle, newValue: any, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    return this._connection.request(\n      {\n        method: \"PATCH\",\n        path: `/graph/${this.graph.name}/edge/${this._documentHandle(\n          documentHandle\n        )}`,\n        body: newValue,\n        qs: opts,\n        headers\n      },\n      res => res.body.edge\n    );\n  }\n\n  remove(documentHandle: DocumentHandle, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    return this._connection.request(\n      {\n        method: \"DELETE\",\n        path: `/graph/${this.graph.name}/edge/${this._documentHandle(\n          documentHandle\n        )}`,\n        qs: opts,\n        headers\n      },\n      res => res.body.removed\n    );\n  }\n}\n\nconst GRAPH_NOT_FOUND = 1924;\nexport class Graph {\n  name: string;\n\n  private _connection: Connection;\n\n  constructor(connection: Connection, name: string) {\n    this.name = name;\n    this._connection = connection;\n  }\n\n  get() {\n    return this._connection.request(\n      { path: `/_api/graph/${this.name}` },\n      res => res.body.graph\n    );\n  }\n\n  exists(): Promise<boolean> {\n    return this.get().then(\n      () => true,\n      err => {\n        if (isC8Error(err) && err.errorNum === GRAPH_NOT_FOUND) {\n          return false;\n        }\n        throw err;\n      }\n    );\n  }\n\n  create(properties: any = {}) {\n    return this._connection.request(\n      {\n        method: \"POST\",\n        path: \"/_api/graph\",\n        body: {\n          ...properties,\n          name: this.name\n        }\n      },\n      res => res.body.graph\n    );\n  }\n\n  drop(dropCollections: boolean = false) {\n    return this._connection.request(\n      {\n        method: \"DELETE\",\n        path: `/_api/graph/${this.name}`,\n        qs: { dropCollections }\n      },\n      res => res.body.removed\n    );\n  }\n\n  vertexCollection(collectionName: string) {\n    return new GraphVertexCollection(this._connection, collectionName, this);\n  }\n\n  listVertexCollections() {\n    return this._connection.request(\n      { path: `/_api/graph/${this.name}/vertex` },\n      res => res.body.collections\n    );\n  }\n\n  async vertexCollections() {\n    const names = await this.listVertexCollections();\n    return names.map(\n      (name: any) => new GraphVertexCollection(this._connection, name, this)\n    );\n  }\n\n  addVertexCollection(collection: string | C8Collection) {\n    if (isC8Collection(collection)) {\n      collection = collection.name;\n    }\n    return this._connection.request(\n      {\n        method: \"POST\",\n        path: `/_api/graph/${this.name}/vertex`\n      },\n      res => res.body.graph\n    );\n  }\n\n  removeVertexCollection(\n    collection: string | C8Collection,\n    dropCollection: boolean = false\n  ) {\n    if (isC8Collection(collection)) {\n      collection = collection.name;\n    }\n    return this._connection.request(\n      {\n        method: \"DELETE\",\n        path: `/_api/graph/${this.name}/vertex/${collection}`,\n        qs: {\n          dropCollection\n        }\n      },\n      res => res.body.graph\n    );\n  }\n\n  edgeCollection(collectionName: string) {\n    return new GraphEdgeCollection(this._connection, collectionName, this);\n  }\n\n  listEdgeCollections() {\n    return this._connection.request(\n      { path: `/_api/graph/${this.name}/edge` },\n      res => res.body.collections\n    );\n  }\n\n  async edgeCollections() {\n    const names = await this.listEdgeCollections();\n    return names.map(\n      (name: any) => new GraphEdgeCollection(this._connection, name, this)\n    );\n  }\n\n  addEdgeDefinition(definition: any) {\n    return this._connection.request(\n      {\n        method: \"POST\",\n        path: `/_api/graph/${this.name}/edge`,\n        body: definition\n      },\n      res => res.body.graph\n    );\n  }\n\n  replaceEdgeDefinition(definitionName: string, definition: any) {\n    return this._connection.request(\n      {\n        method: \"PUT\",\n        path: `/_api/graph/${this.name}/edge/${definitionName}`,\n        body: definition\n      },\n      res => res.body.graph\n    );\n  }\n\n  removeEdgeDefinition(\n    definitionName: string,\n    dropCollection: boolean = false\n  ) {\n    return this._connection.request(\n      {\n        method: \"DELETE\",\n        path: `/_api/graph/${this.name}/edge/${definitionName}`,\n        qs: {\n          dropCollection\n        }\n      },\n      res => res.body.graph\n    );\n  }\n}\n"]}