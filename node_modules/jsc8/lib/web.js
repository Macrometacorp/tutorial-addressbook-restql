!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jsC8=e():t.jsC8=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var a=e[o](i),u=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return Boolean(t&&t.isC8Collection)}function c(t,e){return new(e.type===f.EDGE_COLLECTION?m:v)(t,e.name)}var h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var f,p=n(1),d=n(2);!function(t){t[t.DOCUMENT_COLLECTION=2]="DOCUMENT_COLLECTION",t[t.EDGE_COLLECTION=3]="EDGE_COLLECTION"}(f=e.CollectionType||(e.CollectionType={})),e.isC8Collection=s,e.DOCUMENT_NOT_FOUND=1202,e.COLLECTION_NOT_FOUND=1203;var y=function(){function t(e,n){u(this,t),this.isC8Collection=!0,this.name=n,this._idPrefix=this.name+"/",this._connection=e,this.stream=new d.Stream(e,n,!0),this._connection.c8Major>=3&&(this.createCapConstraint=void 0)}return l(t,[{key:"_documentPath",value:function(t){return"/document/"+this._documentHandle(t)}},{key:"_documentHandle",value:function(t){if("string"!=typeof t){if(t._id)return t._id;if(t._key)return this._idPrefix+t._key;throw new Error("Document handle must be a document or string")}return-1===t.indexOf("/")?this._idPrefix+t:t}},{key:"_indexHandle",value:function(t){if("string"!=typeof t){if(t.id)return t.id;throw new Error("Index handle must be a index or string")}return-1===t.indexOf("/")?this._idPrefix+t:t}},{key:"_get",value:function(t,e){return this._connection.request({path:"/collection/"+this.name+"/"+t,qs:e},function(t){return t.body})}},{key:"_put",value:function(t,e){return this._connection.request({method:"PUT",path:"/collection/"+this.name+"/"+t,body:e},function(t){return t.body})}},{key:"get",value:function(){return this._connection.request({path:"/collection/"+this.name},function(t){return t.body})}},{key:"exists",value:function(){return this.get().then(function(){return!0},function(t){if(p.isC8Error(t)&&t.errorNum===e.COLLECTION_NOT_FOUND)return!1;throw t})}},{key:"create",value:function(t){return this._connection.request({method:"POST",path:"/collection",body:h({},t,{name:this.name,type:this.type})},function(t){return t.body})}},{key:"onChange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"subs";this.stream.consumer(n,t,e)}},{key:"closeOnChangeConnection",value:function(){this.stream.closeConnections()}},{key:"properties",value:function(){return this._get("properties")}},{key:"count",value:function(){return this._get("count")}},{key:"rename",value:function(){function t(t){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._connection.request({method:"PUT",path:"/collection/"+this.name+"/rename",body:{name:e}},function(t){return t.body});case 2:return n=t.sent,this.name=e,this._idPrefix=e+"/",t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"truncate",value:function(){return this._put("truncate",void 0)}},{key:"drop",value:function(t){return this._connection.request({method:"DELETE",path:"/collection/"+this.name,qs:t},function(t){return t.body})}},{key:"documentExists",value:function(t){return this._connection.request({method:"HEAD",path:"/"+this._documentPath(t)},function(){return!0}).catch(function(t){if(404===t.statusCode)return!1;throw t})}},{key:"document",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._connection.request({path:"/"+this._documentPath(t)},function(t){return t.body});return n?r.catch(function(t){if(p.isC8Error(t)&&t.errorNum===e.DOCUMENT_NOT_FOUND)return null;throw t}):r}},{key:"replace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev&&this._connection.c8Major>=3){var o=void 0,a=n;o=a.rev,n=i(a,["rev"]),r["if-match"]=o}return this._connection.request({method:"PUT",path:"/"+this._documentPath(t),body:e,qs:n,headers:r},function(t){return t.body})}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev&&this._connection.c8Major>=3){var o=void 0,a=n;o=a.rev,n=i(a,["rev"]),r["if-match"]=o}return this._connection.request({method:"PATCH",path:"/"+this._documentPath(t),body:e,qs:n,headers:r},function(t){return t.body})}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof e&&(e={rev:e}),e.rev&&this._connection.c8Major>=3){var r=void 0,o=e;r=o.rev,e=i(o,["rev"]),n["if-match"]=r}return this._connection.request({method:"DELETE",path:"/"+this._documentPath(t),qs:e,headers:n},function(t){return t.body})}},{key:"import",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,r=void 0===n?"auto":n,o=i(e,["type"]);return Array.isArray(t)&&(t=t.map(function(t){return JSON.stringify(t)}).join("\r\n")+"\r\n"),this._connection.request({method:"POST",path:"/import",body:t,isBinary:!0,qs:h({type:null===r?void 0:r},o,{collection:this.name})},function(t){return t.body})}},{key:"indexes",value:function(){return this._connection.request({path:"/index",qs:{collection:this.name}},function(t){return t.body.indexes})}},{key:"index",value:function(t){return this._connection.request({path:"/index/"+this._indexHandle(t)},function(t){return t.body})}},{key:"createIndex",value:function(t){return this._connection.request({method:"POST",path:"/index",body:t,qs:{collection:this.name}},function(t){return t.body})}},{key:"dropIndex",value:function(t){return this._connection.request({method:"DELETE",path:"/index/"+this._indexHandle(t)},function(t){return t.body})}},{key:"createCapConstraint",value:function(t){return"number"==typeof t&&(t={size:t}),this._connection.request({method:"POST",path:"/index",body:h({},t,{type:"cap"}),qs:{collection:this.name}},function(t){return t.body})}},{key:"createHashIndex",value:function(t,e){return"string"==typeof t&&(t=[t]),"boolean"==typeof e&&(e={unique:e}),this._connection.request({method:"POST",path:"/index",body:h({unique:!1},e,{type:"hash",fields:t}),qs:{collection:this.name}},function(t){return t.body})}},{key:"createSkipList",value:function(t,e){return"string"==typeof t&&(t=[t]),"boolean"==typeof e&&(e={unique:e}),this._connection.request({method:"POST",path:"/index",body:h({unique:!1},e,{type:"skiplist",fields:t}),qs:{collection:this.name}},function(t){return t.body})}},{key:"createPersistentIndex",value:function(t,e){return"string"==typeof t&&(t=[t]),"boolean"==typeof e&&(e={unique:e}),this._connection.request({method:"POST",path:"/index",body:h({unique:!1},e,{type:"persistent",fields:t}),qs:{collection:this.name}},function(t){return t.body})}},{key:"createGeoIndex",value:function(t,e){return"string"==typeof t&&(t=[t]),this._connection.request({method:"POST",path:"/index",body:h({},e,{fields:t,type:"geo"}),qs:{collection:this.name}},function(t){return t.body})}},{key:"createFulltextIndex",value:function(t,e){return"string"==typeof t&&(t=[t]),this._connection.request({method:"POST",path:"/index",body:{fields:t,minLength:e,type:"fulltext"},qs:{collection:this.name}},function(t){return t.body})}}]),t}();e.BaseCollection=y;var v=function(t){function e(t,n){u(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.type=f.DOCUMENT_COLLECTION,o}return o(e,t),l(e,[{key:"save",value:function(t,e){return"boolean"==typeof e&&(e={returnNew:e}),this._connection.c8Major<=2?this._connection.request({method:"POST",path:"/document",body:t,qs:h({},e,{collection:this.name})},function(t){return t.body}):this._connection.request({method:"POST",path:"/document/"+this.name,body:t,qs:e},function(t){return t.body})}}]),e}(y);e.DocumentCollection=v;var m=function(t){function e(t,n){u(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.type=f.EDGE_COLLECTION,o}return o(e,t),l(e,[{key:"_documentPath",value:function(t){return this._connection.c8Major<3?"edge/"+this._documentHandle(t):"document/"+this._documentHandle(t)}},{key:"edge",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.document(t,e)}},{key:"save",value:function(t,e,n,r){return void 0!==n?(t._from=this._documentHandle(e),t._to=this._documentHandle(n)):void 0!==e&&(r=e),"boolean"==typeof r&&(r={returnNew:r}),this._connection.c8Major<=2?this._connection.request({method:"POST",path:"/edge",body:t,qs:h({},r,{collection:this.name,from:t._from,to:t._to})},function(t){return t.body}):this._connection.request({method:"POST",path:"/document",body:t,qs:h({},r,{collection:this.name})},function(t){return t.body})}},{key:"_edges",value:function(t,e){return this._connection.request({path:"/edges/"+this.name,qs:{direction:e,vertex:this._documentHandle(t)}},function(t){return t.body.edges})}},{key:"edges",value:function(t){return this._edges(t,void 0)}},{key:"inEdges",value:function(t){return this._edges(t,"in")}},{key:"outEdges",value:function(t){return this._edges(t,"out")}},{key:"traversal",value:function(t,e){return this._connection.request({method:"POST",path:"/traversal",body:h({},e,{startVertex:t,edgeCollection:this.name})},function(t){return t.body.result})}}]),e}(y);e.EdgeCollection=m,e.constructCollection=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return Boolean(t&&t.isC8Error)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(15),s={0:"Network Error",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",444:"Connection Closed Without Response",451:"Unavailable For Legal Reasons",499:"Client Closed Request",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",599:"Network Connect Timeout Error"},c=["fileName","lineNumber","columnNumber","stack","description","number"];e.isC8Error=a;var h=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.name="C8Error",n.isC8Error=!0,n.response=t,n.statusCode=t.statusCode,n.message=t.body.errorMessage,n.errorNum=t.body.errorNum,n.code=t.body.code;var i=new Error(n.message);i.name=n.name;var a=!0,u=!1,s=void 0;try{for(var h,l=c[Symbol.iterator]();!(a=(h=l.next()).done);a=!0){var f=h.value;i[f]&&(n[f]=i[f])}}catch(i){u=!0,s=i}finally{try{!a&&l.return&&l.return()}finally{if(u)throw s}}return n}return i(e,t),e}(u.default);e.C8Error=h;var l=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.name="HttpError",n.response=t,n.statusCode=t.statusCode||500,n.message=s[n.statusCode]||s[500],n.code=n.statusCode;var i=new Error(n.message);i.name=n.name;var a=!0,u=!1,h=void 0;try{for(var l,f=c[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var p=l.value;i[p]&&(n[p]=i[p])}}catch(i){u=!0,h=i}finally{try{!a&&f.return&&f.return()}finally{if(u)throw h}}return n}return i(e,t),e}(u.default);e.HttpError=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(17),u=n(5),s=n(18);!function(t){t.PERSISTENT="persistent"}(i=e.StreamConstants||(e.StreamConstants={}));var c=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,t),this._connection=e,this.name=n,this.local=o,this._consumers=[],this.setIntervalId=void 0}return o(t,[{key:"_getPath",value:function(t){return a.getFullStreamPath(this.name,t)}},{key:"createStream",value:function(){return this._connection.request({method:"POST",path:this._getPath(),qs:"local="+this.local},function(t){return t.body})}},{key:"expireMessagesOnAllSubscriptions",value:function(t){var e="/all_subscription/expireMessages/"+t;return this._connection.request({method:"POST",path:this._getPath(e),qs:"local="+this.local},function(t){return t.body})}},{key:"backlog",value:function(){return this._connection.request({method:"GET",path:this._getPath("/backlog"),qs:"local="+this.local},function(t){return t.body})}},{key:"compaction",value:function(){return this._connection.request({method:"GET",path:this._getPath("/compaction"),qs:"local="+this.local},function(t){return t.body})}},{key:"triggerCompaction",value:function(){return this._connection.request({method:"PUT",path:this._getPath("/compaction"),qs:"local="+this.local},function(t){return t.body})}},{key:"getStreamStatistics",value:function(){return this._connection.request({method:"GET",path:this._getPath("/stats"),qs:"local="+this.local},function(t){return t.body})}},{key:"deleteSubscription",value:function(t){var e="/subscription/"+t;return this._connection.request({method:"DELETE",path:this._getPath(e),qs:"local="+this.local},function(t){return t.body})}},{key:"resetSubscriptionToPosition",value:function(t){var e="/subscription/"+t;return this._connection.request({method:"PUT",path:this._getPath(e),qs:"local="+this.local},function(t){return t.body})}},{key:"expireMessages",value:function(t,e){var n="/subscription/"+t+"/expireMessages/"+e;return this._connection.request({method:"POST",path:this._getPath(n),qs:"local="+this.local},function(t){return t.body})}},{key:"resetCursor",value:function(t){var e="/subscription/"+t+"/resetcursor";return this._connection.request({method:"POST",path:this._getPath(e),qs:"local="+this.local},function(t){return t.body})}},{key:"resetSubscriptionToTimestamp",value:function(t,e){var n="/subscription/"+t+"/resetcursor/"+e;return this._connection.request({method:"POST",path:this._getPath(n),qs:"local="+this.local},function(t){return t.body})}},{key:"skipNumberOfMessages",value:function(t,e){var n="/subscription/"+t+"/skip/"+e;return this._connection.request({method:"POST",path:this._getPath(n),qs:"local="+this.local},function(t){return t.body})}},{key:"skipAllMessages",value:function(t){var e="/subscription/"+t+"/skip_all";return this._connection.request({method:"POST",path:this._getPath(e),qs:"local="+this.local},function(t){return t.body})}},{key:"getSubscriptionList",value:function(){return this._connection.request({method:"GET",path:this._getPath("/subscriptions"),qs:"local="+this.local},function(t){return t.body})}},{key:"terminateStream",value:function(){return this._connection.request({method:"POST",path:this._getPath("/terminate"),qs:"local="+this.local},function(t){return t.body})}},{key:"consumer",value:function(t,e,n){var r=this,o=n.toLocaleLowerCase();if(o.includes("http")||o.includes("https"))throw"Invalid DC name";var a=e.onopen,c=e.onclose,h=e.onerror,l=e.onmessage,f=i.PERSISTENT,p=this.local?"c8local":"c8global",d=this._connection.getTenantName(),y=this._connection.getFabricName();if(!y||!d)throw"Set correct DB and/or tenant name before using.";var v="wss://"+n+"/_ws/ws/v2/consumer/"+f+"/"+d+"/"+p+"."+y+"/"+this.name+"/"+t;this._consumers.push(s.ws(v));var m=this._consumers.length-1,b=this._consumers[m];b.on("open",function(){"function"==typeof a&&a()}),b.on("close",function(){r.setIntervalId&&clearInterval(r.setIntervalId),"function"==typeof c&&c()}),b.on("error",function(t){console.log("Consumer connection errored ",t),"function"==typeof h&&h(t)}),b.on("message",function(t){var e=JSON.parse(t),n={messageId:e.messageId},r=e.payload;r!==u.btoa("noop")&&"noop"!==r?"function"==typeof l&&(b.send(JSON.stringify(n)),l(t)):b.send(JSON.stringify(n))}),!this._noopProducer&&this.noopProducer(n)}},{key:"noopProducer",value:function(t){var e=this,n=t.toLocaleLowerCase();if(n.includes("http")||n.includes("https"))throw"Invalid DC name";var r=i.PERSISTENT,o=this.local?"c8local":"c8global",a=this._connection.getTenantName(),u=this._connection.getFabricName();if(!u||!a)throw"Set correct DB and/or tenant name before using.";var c="wss://"+t+"/_ws/ws/v2/producer/"+r+"/"+a+"/"+o+"."+u+"/"+this.name;this._noopProducer=s.ws(c),this._noopProducer.on("open",function(){e.setIntervalId=setInterval(function(){e._noopProducer.send(JSON.stringify({payload:"noop"}))},3e4)}),this._noopProducer.on("error",function(t){return console.log("noop producer errored ",t)})}},{key:"producer",value:function(t,e){var n=this;if(void 0===this._producer){if(!e)throw"DC name not provided to establish producer connection";var r=e.toLocaleLowerCase();if(r.includes("http")||r.includes("https"))throw"Invalid DC name";var o=i.PERSISTENT,a=this.local?"c8local":"c8global",c=this._connection.getTenantName(),h=this._connection.getFabricName();if(!h||!c)throw"Set correct DB and/or tenant name before using.";var l="wss://"+e+"/_ws/ws/v2/producer/"+o+"/"+c+"/"+a+"."+h+"/"+this.name;this._producer=s.ws(l),this._producer.on("message",function(t){return console.log("received ack: %s",t)}),this._producer.on("open",function(){n._producer.send(JSON.stringify({payload:u.btoa(t)}))}),this._producer.on("close",function(t){console.log("Producer connection closed ",t)}),this._producer.on("error",function(t){console.log("Producer connection errored ",t)})}else this._producer.readyState===this._producer.OPEN?this._producer.send(JSON.stringify({payload:u.btoa(t)})):console.warn("Producer connection not open yet. Please wait.")}},{key:"closeConnections",value:function(){this.setIntervalId&&clearInterval(this.setIntervalId),this._producer&&this._producer.terminate(),this._noopProducer&&this._noopProducer.terminate(),this._consumers&&this._consumers.forEach(function(t){return t.terminate()})}}]),t}();e.Stream=c},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return Boolean(t&&t.query&&t.bindVars)}function o(t){return Boolean(t&&"function"==typeof t.toC8QL)}function i(t){for(var e={},n=[],r=t[0],i=arguments.length,u=Array(i>1?i-1:0),s=1;s<i;s++)u[s-1]=arguments[s];for(var c=0;c<u.length;c++){var h=u[c],l=h;if(o(h))r+=""+h.toC8QL()+t[c+1];else{var f=n.indexOf(h),p=-1!==f,d="value"+(p?f:n.length);a.isC8Collection(h)&&(d="@"+d,l=h.name),p||(n.push(h),e[d]=l),r+="@"+d+t[c+1]}}return{query:r,bindVars:e}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0);e.isC8QLQuery=r,e.isC8QLLiteral=o,e.c8ql=i,function(t){t.literal=function(t){return{toC8QL:function(){return String(t)}}}}(i=e.c8ql||(e.c8ql={}))},function(t,e,n){"use strict";function r(t){return window.btoa(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.btoa=r},function(t,e,n){"use strict";e.decode=e.parse=n(21),e.encode=e.stringify=n(22)},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var a=e[o](i),u=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var h=n(0),l=n(1),f=function(t){function e(t,n,r){i(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.type=h.CollectionType.DOCUMENT_COLLECTION,o.graph=r,o}return u(e,t),c(e,[{key:"document",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._connection.request({path:"/graph/"+this.graph.name+"/vertex/"+this._documentHandle(t)},function(t){return t.body.vertex});return e?n.catch(function(t){if(l.isC8Error(t)&&t.errorNum===h.DOCUMENT_NOT_FOUND)return null;throw t}):n}},{key:"vertex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.document(t,e)}},{key:"save",value:function(t,e){return this._connection.request({method:"POST",path:"/graph/"+this.graph.name+"/vertex/"+this.name,body:t,qs:e},function(t){return t.body.vertex})}},{key:"replace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var i=void 0,a=n;i=a.rev,n=o(a,["rev"]),r["if-match"]=i}return this._connection.request({method:"PUT",path:"/graph/"+this.graph.name+"/vertex/"+this._documentHandle(t),body:e,qs:n,headers:r},function(t){return t.body.vertex})}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var i=void 0,a=n;i=a.rev,n=o(a,["rev"]),r["if-match"]=i}return this._connection.request({method:"PATCH",path:"/graph/"+this.graph.name+"/vertex/"+this._documentHandle(t),body:e,qs:n,headers:r},function(t){return t.body.vertex})}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof e&&(e={rev:e}),e.rev){var r=void 0,i=e;r=i.rev,e=o(i,["rev"]),n["if-match"]=r}return this._connection.request({method:"DELETE",path:"/graph/"+this.graph.name+"/vertex/"+this._documentHandle(t),qs:e,headers:n},function(t){return t.body.removed})}}]),e}(h.BaseCollection);e.GraphVertexCollection=f;var p=function(t){function e(t,n,r){i(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.type=h.CollectionType.EDGE_COLLECTION,o.type=h.CollectionType.EDGE_COLLECTION,o.graph=r,o}return u(e,t),c(e,[{key:"document",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._connection.request({path:"/graph/"+this.graph.name+"/edge/"+this._documentHandle(t)},function(t){return t.body.edge});return e?n.catch(function(t){if(l.isC8Error(t)&&t.errorNum===h.DOCUMENT_NOT_FOUND)return null;throw t}):n}},{key:"save",value:function(t,e,n,r){return void 0!==e&&(void 0!==n?(t._from=this._documentHandle(e),t._to=this._documentHandle(n)):r=e),this._connection.request({method:"POST",path:"/graph/"+this.graph.name+"/edge/"+this.name,body:t,qs:r},function(t){return t.body.edge})}},{key:"replace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var i=void 0,a=n;i=a.rev,n=o(a,["rev"]),r["if-match"]=i}return this._connection.request({method:"PUT",path:"/graph/"+this.graph.name+"/edge/"+this._documentHandle(t),body:e,qs:n,headers:r},function(t){return t.body.edge})}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};if("string"==typeof n&&(n={rev:n}),n.rev){var i=void 0,a=n;i=a.rev,n=o(a,["rev"]),r["if-match"]=i}return this._connection.request({method:"PATCH",path:"/graph/"+this.graph.name+"/edge/"+this._documentHandle(t),body:e,qs:n,headers:r},function(t){return t.body.edge})}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof e&&(e={rev:e}),e.rev){var r=void 0,i=e;r=i.rev,e=o(i,["rev"]),n["if-match"]=r}return this._connection.request({method:"DELETE",path:"/graph/"+this.graph.name+"/edge/"+this._documentHandle(t),qs:e,headers:n},function(t){return t.body.removed})}}]),e}(h.EdgeCollection);e.GraphEdgeCollection=p;var d=function(){function t(e,n){i(this,t),this.name=n,this._connection=e}return c(t,[{key:"get",value:function(){return this._connection.request({path:"/_api/graph/"+this.name},function(t){return t.body.graph})}},{key:"exists",value:function(){return this.get().then(function(){return!0},function(t){if(l.isC8Error(t)&&1924===t.errorNum)return!1;throw t})}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._connection.request({method:"POST",path:"/_api/graph",body:s({},t,{name:this.name})},function(t){return t.body.graph})}},{key:"drop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"DELETE",path:"/_api/graph/"+this.name,qs:{dropCollections:t}},function(t){return t.body.removed})}},{key:"vertexCollection",value:function(t){return new f(this._connection,t,this)}},{key:"listVertexCollections",value:function(){return this._connection.request({path:"/_api/graph/"+this.name+"/vertex"},function(t){return t.body.collections})}},{key:"vertexCollections",value:function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listVertexCollections();case 2:return e=t.sent,t.abrupt("return",e.map(function(t){return new f(n._connection,t,n)}));case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"addVertexCollection",value:function(t){return h.isC8Collection(t)&&(t=t.name),this._connection.request({method:"POST",path:"/_api/graph/"+this.name+"/vertex"},function(t){return t.body.graph})}},{key:"removeVertexCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h.isC8Collection(t)&&(t=t.name),this._connection.request({method:"DELETE",path:"/_api/graph/"+this.name+"/vertex/"+t,qs:{dropCollection:e}},function(t){return t.body.graph})}},{key:"edgeCollection",value:function(t){return new p(this._connection,t,this)}},{key:"listEdgeCollections",value:function(){return this._connection.request({path:"/_api/graph/"+this.name+"/edge"},function(t){return t.body.collections})}},{key:"edgeCollections",value:function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listEdgeCollections();case 2:return e=t.sent,t.abrupt("return",e.map(function(t){return new p(n._connection,t,n)}));case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"addEdgeDefinition",value:function(t){return this._connection.request({method:"POST",path:"/_api/graph/"+this.name+"/edge",body:t},function(t){return t.body.graph})}},{key:"replaceEdgeDefinition",value:function(t,e){return this._connection.request({method:"PUT",path:"/_api/graph/"+this.name+"/edge/"+t,body:e},function(t){return t.body.graph})}},{key:"removeEdgeDefinition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._connection.request({method:"DELETE",path:"/_api/graph/"+this.name+"/edge/"+t,qs:{dropCollection:e}},function(t){return t.body.graph})}}]),t}();e.Graph=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,n){r(this,t),this._connection=e,this.name=n}return o(t,[{key:"createTenant",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this._connection.request({method:"POST",path:"/tenant",absolutePath:!0,body:{dcList:n,name:this.name,passwd:t,extra:e}},function(t){return t.body})}},{key:"dropTenant",value:function(){return this._connection.request({method:"DELETE",path:"/tenant/"+this.name,absolutePath:!0},function(t){return t.body})}},{key:"tenantDetails",value:function(){return this._connection.request({method:"GET",path:"/tenant/"+this.name,absolutePath:!0},function(t){return t.body})}},{key:"modifyTenant",value:function(t,e){return this._connection.request({method:"PATCH",path:"/tenant/"+this.name,absolutePath:!0,body:{extra:e,passwd:t}},function(t){return t.body})}}]),t}();e.Tenant=i},function(t,e,n){n(12),t.exports=n(13)},function(t,e,n){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){function r(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),u=new d(r||[]);return a._invoke=h(t,n,u),a}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function a(){}function u(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){function n(r,i,a,u){var s=o(t[r],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"===(void 0===h?"undefined":e(h))&&_.call(h,"__await")?Promise.resolve(h.__await).then(function(t){n("next",t,a,u)},function(t){n("throw",t,a,u)}):Promise.resolve(h).then(function(t){c.value=t,a(c)},u)}u(s.arg)}function r(t,e){function r(){return new Promise(function(r,o){n(t,e,r,o)})}return i=i?i.then(r,r):r()}var i;this._invoke=r}function h(t,e,n){var r=P;return function(i,a){if(r===E)throw new Error("Generator is already running");if(r===S){if("throw"===i)throw a;return v()}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=l(u,n);if(s){if(s===C)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===P)throw r=S,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=E;var c=o(t,e,n);if("normal"===c.type){if(r=n.done?S:T,c.arg===C)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=S,n.method="throw",n.arg=c.arg)}}}function l(t,e){var n=t.iterator[e.method];if(n===m){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=m,l(t,e),"throw"===e.method))return C;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var r=o(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,C;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=m),e.delegate=null,C):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,C)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function y(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(_.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=m,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:m,done:!0}}var m,b=Object.prototype,_=b.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},w=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",k=g.toStringTag||"@@toStringTag",O="object"===e(t),q=n.regeneratorRuntime;if(q)return void(O&&(t.exports=q));q=n.regeneratorRuntime=O?t.exports:{},q.wrap=r;var P="suspendedStart",T="suspendedYield",E="executing",S="completed",C={},j={};j[w]=function(){return this};var L=Object.getPrototypeOf,N=L&&L(L(y([])));N&&N!==b&&_.call(N,w)&&(j=N);var A=u.prototype=i.prototype=Object.create(j);a.prototype=A.constructor=u,u.constructor=a,u[k]=a.displayName="GeneratorFunction",q.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},q.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,k in t||(t[k]="GeneratorFunction")),t.prototype=Object.create(A),t},q.awrap=function(t){return{__await:t}},s(c.prototype),c.prototype[x]=function(){return this},q.AsyncIterator=c,q.async=function(t,e,n,o){var i=new c(r(t,e,n,o));return q.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},s(A),A[k]="Generator",A[w]=function(){return this},A.toString=function(){return"[object Generator]"},q.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},q.values=y,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&_.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return i.type="throw",i.arg=t,n.next=e,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=_.call(o,"catchLoc"),u=_.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&_.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,C):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),C},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),C}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;p(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:y(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=m),C}}}(function(){return this}()||Function("return this")())}).call(e,n(3)(t))},function(t,e,n){"use strict";t.exports=n(14).default,t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){return new a.Fabric(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4);e.c8ql=o.c8ql;var i=n(0),a=n(19);e.Fabric=a.Fabric;var u=n(1);e.default=r,Object.assign(r,{CollectionType:i.CollectionType,C8Error:u.C8Error,Fabric:a.Fabric,c8ql:o.c8ql});var s=n(0);e.DocumentCollection=s.DocumentCollection,e.EdgeCollection=s.EdgeCollection;var c=n(9);e.Graph=c.Graph;var h=n(10);e.Tenant=h.Tenant;var l=n(2);e.Stream=l.Stream},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16);r=r.default||r,e.default=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":a(e))&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(n,n.constructor),o(n)):(Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0}),n)}return i(e,t),e}(function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Error));e.default=u},function(t,e,n){"use strict";function r(t,e){var n="/streams/"+i.StreamConstants.PERSISTENT+"/stream/"+t;return e?""+n+e:n}function o(t){return t.reduce(function(t,e,n){return n>0?t+","+e.name:e.name},"")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);e.getFullStreamPath=r,e.getDCListString=o},function(t,e,n){"use strict";function r(t){var e=new WebSocket(t);return{on:function(t,n){var r=function(t){return n(t)};switch(t){case"open":e.onopen=r;break;case"close":e.onclose=r;break;case"error":e.onerror=r;break;case"message":e.onmessage=function(t){return n(t.data)}}},send:function(t){e.send(t)},terminate:function(t,n){e.close(t,n)},getConnection:function(){return e}}}Object.defineProperty(e,"__esModule",{value:!0}),e.ws=r},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var a=e[o](i),u=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return h.isC8Collection(t)?String(t.name):String(t)}var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var c=n(4),h=n(0),l=n(20),f=n(40),p=n(1),d=n(9),y=n(10),v=n(2),m=n(41),b=n(5),_=n(42),g=function(){function t(e){o(this,t),this._connection=new l.Connection(e)}return s(t,[{key:"route",value:function(t,e){return new m.Route(this._connection,t,e)}},{key:"close",value:function(){this._connection.close()}},{key:"useFabric",value:function(t){return this._connection.setFabricName(t),this}},{key:"useBearerAuth",value:function(t){return this._connection.setHeader("authorization","Bearer "+t),this}},{key:"useBasicAuth",value:function(t,e){return this._connection.setHeader("authorization","Basic "+b.btoa(t+":"+e)),this}},{key:"get",value:function(){return this._connection.request({path:"/database/current"},function(t){return t.body.result})}},{key:"exists",value:function(){return this.get().then(function(){return!0},function(t){if(p.isC8Error(t)&&1228===t.errorNum)return!1;throw t})}},{key:"createFabric",value:function(t,e,n){return this._connection.request({method:"POST",path:"/database",body:{users:e||[],name:t,options:n}},function(t){return t.body})}},{key:"listFabrics",value:function(){return this._connection.request({path:"/database"},function(t){return t.body.result})}},{key:"listUserFabrics",value:function(){return this._connection.request({path:"/database/user"},function(t){return t.body.result})}},{key:"dropFabric",value:function(t){return this._connection.request({method:"DELETE",path:"/database/"+t},function(t){return t.body})}},{key:"login",value:function(t,e,n){var r=this;return this._connection.request({method:"POST",path:"/_open/auth",body:{username:e,password:n,tenant:t},absolutePath:!0},function(t){return r.useBearerAuth(t.body.jwt),t.body.jwt})}},{key:"updateFabricSpotRegion",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this._connection.request({method:"PUT",path:"_tenant/"+t+"/_fabric/"+e+"/database/"+n,absolutePath:!0},function(t){return t.body})}},{key:"collection",value:function(t){return new h.DocumentCollection(this._connection,t)}},{key:"edgeCollection",value:function(t){return new h.EdgeCollection(this._connection,t)}},{key:"listCollections",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._connection.request({path:"/collection",qs:{excludeSystem:e}},function(e){return t._connection.c8Major<=2?e.body.collections:e.body.result})}},{key:"collections",value:function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e,n=this,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listCollections(r);case 2:return e=t.sent,t.abrupt("return",e.map(function(t){return h.constructCollection(n._connection,t)}));case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"truncate",value:function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e,n=this,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listCollections(r);case 2:return e=t.sent,t.next=5,Promise.all(e.map(function(t){return n._connection.request({method:"PUT",path:"/collection/"+t.name+"/truncate"},function(t){return t.body})}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"graph",value:function(t){return new d.Graph(this._connection,t)}},{key:"listGraphs",value:function(){return this._connection.request({path:"/_api/graph"},function(t){return t.body.graphs})}},{key:"graphs",value:function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listGraphs();case 2:return e=t.sent,t.abrupt("return",e.map(function(t){return n.graph(t._key)}));case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"transaction",value:function(t,e,n,r){return"number"==typeof n&&(r=n,n=void 0),"number"==typeof r&&(r={lockTimeout:r}),"string"==typeof t?t={write:[t]}:Array.isArray(t)?t={write:t.map(i)}:h.isC8Collection(t)?t={write:i(t)}:t&&"object"===(void 0===t?"undefined":u(t))&&(t=a({},t),t.read&&(Array.isArray(t.read)?t.read=t.read.map(i):t.read=i(t.read)),t.write&&(Array.isArray(t.write)?t.write=t.write.map(i):t.write=i(t.write))),this._connection.request({method:"POST",path:"/transaction",body:a({collections:t,action:e,params:n},r)},function(t){return t.body.result})}},{key:"query",value:function(t,e,n){var r=this;return c.isC8QLQuery(t)?(n=e,e=t.bindVars,t=t.query):c.isC8QLLiteral(t)&&(t=t.toC8QL()),this._connection.request({method:"POST",path:"/cursor",body:a({},n,{query:t,bindVars:e})},function(t){return new f.ArrayCursor(r._connection,t.body,t.host)})}},{key:"validateQuery",value:function(t){return this._connection.request({method:"POST",path:"/query",body:{query:t}},function(t){return t.body})}},{key:"explainQuery",value:function(t){return this._connection.request({method:"POST",path:"/query/explain",body:a({},t)},function(t){return t.body})}},{key:"getCurrentQueries",value:function(){return this._connection.request({path:"/query/current"},function(t){return t.body})}},{key:"clearSlowQueries",value:function(){return this._connection.request({method:"DELETE",path:"/query/slow"},function(t){return t.body})}},{key:"getSlowQueries",value:function(){return this._connection.request({path:"/query/slow"},function(t){return t.body})}},{key:"terminateRunningQuery",value:function(t){return this._connection.request({method:"DELETE",path:"/query/"+t},function(t){return t.body})}},{key:"listFunctions",value:function(){return this._connection.request({path:"/c8qlfunction"},function(t){return t.body})}},{key:"createFunction",value:function(t,e,n){return this._connection.request({method:"POST",path:"/c8qlfunction",body:{name:t,code:e,isDeterministic:n}},function(t){return t.body})}},{key:"dropFunction",value:function(t,e){var n="boolean"==typeof e?"/c8qlfunction/"+t+"?group="+e:"/c8qlfunction/"+t;return this._connection.request({method:"DELETE",path:n},function(t){return t.body})}},{key:"version",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:"/_tenant/"+this._connection.getTenantName()+"/_admin/version",absolutePath:!0,qs:{details:t}},function(t){return t.body})}},{key:"useTenant",value:function(t){return this._connection.setTenantName(t),this}},{key:"tenant",value:function(t){return new y.Tenant(this._connection,t)}},{key:"listTenants",value:function(){return this._connection.request({method:"GET",path:"/tenants",absolutePath:!0},function(t){return t.body})}},{key:"stream",value:function(t,e){return new v.Stream(this._connection,t,e)}},{key:"getStreams",value:function(){return this._connection.request({method:"GET",path:"/streams"},function(t){return t.body})}},{key:"listPersistentStreams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:"/streams/persistent",qs:"local="+t},function(t){return t.body})}},{key:"clearBacklog",value:function(){return this._connection.request({method:"POST",path:"/streams/clearbacklog"},function(t){return t.body})}},{key:"clearSubscriptionBacklog",value:function(t){return this._connection.request({method:"POST",path:"/streams/clearbacklog/"+t},function(t){return t.body})}},{key:"unsubscribe",value:function(t){return this._connection.request({method:"POST",path:"/streams/unsubscribe/"+t},function(t){return t.body})}},{key:"getAllEdgeLocations",value:function(){return this._connection.request({method:"GET",path:"/datacenter/all",absolutePath:!0},function(t){return t.body})}},{key:"getLocalEdgeLocation",value:function(){return this._connection.request({method:"GET",path:"/datacenter/local",absolutePath:!0},function(t){return t.body})}},{key:"changeEdgeLocationSpotStatus",value:function(t,e){return this._connection.request({method:"PUT",path:"/datacenter/"+t+"/"+e,absolutePath:!0},function(t){return t.body})}},{key:"user",value:function(t){return new _.default(this._connection,t)}},{key:"getAllUsers",value:function(){return this._connection.request({method:"GET",path:"/_admin/user"},function(t){return t.body})}},{key:"listSavedQueries",value:function(){return this._connection.request({method:"GET",path:"/restql/user"},function(t){return t.body})}},{key:"saveQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];try{if(t.includes(" "))throw"Spaces are not allowed in query name";return this._connection.request({method:"POST",path:"/restql",body:{query:{name:t,parameter:e,value:n}}},function(t){return t.body})}catch(t){return t}}},{key:"executeSavedQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._connection.request({method:"POST",path:"/restql/execute/"+t,body:{bindVars:e}},function(t){return t.body})}},{key:"updateSavedQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return this._connection.request({method:"PUT",path:"/restql/"+t,body:{query:{name:name,parameter:e,value:n}}},function(t){return t.body})}},{key:"deleteSavedQuery",value:function(t){return this._connection.request({method:"DELETE",path:"/restql/"+t},function(t){return t.body})}},{key:"createRestqlCursor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._connection.request({method:"POST",path:"/restql/dynamic",body:{bindVars:[e],cache:!0,count:!0,options:{profile:!0},query:t}},function(t){return t.body})}},{key:"name",get:function(){return this._connection.getFabricName()||null}}]),t}();e.Fabric=g},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return Object.getPrototypeOf(t)===Error.prototype&&t.hasOwnProperty("code")&&t.hasOwnProperty("errno")&&t.hasOwnProperty("syscall")}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(6),f=n(1),p=n(23),d=n(39),y=/\/(json|javascript)(\W|$)/,v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._activeTasks=0,this._c8Version=3e4,this._fabricName="_system",this._tenantName="_mm",this._queue=new d,this._hosts=[],this._urls=[],"string"==typeof e?e={url:e}:Array.isArray(e)&&(e={url:e}),void 0!==e.c8Version&&(this._c8Version=e.c8Version),e.isAbsolute&&(this._fabricName=!1,this._tenantName=!1),this._agent=e.agent,this._agentOptions=p.isBrowser?c({},e.agentOptions):c({maxSockets:3,keepAlive:!0,keepAliveMsecs:1e3},e.agentOptions),this._maxTasks=this._agentOptions.maxSockets||3,this._agentOptions.keepAlive&&(this._maxTasks*=2),this._headers=c({},e.headers),this._loadBalancingStrategy=e.loadBalancingStrategy||"NONE",this._useFailOver="ROUND_ROBIN"!==this._loadBalancingStrategy,!1===e.maxRetries?(this._shouldRetry=!1,this._maxRetries=0):(this._shouldRetry=!0,this._maxRetries=e.maxRetries||0);var n=e.url?Array.isArray(e.url)?e.url:[e.url]:["https://test.macrometa.io"];this.addToHostList(n),"ONE_RANDOM"===this._loadBalancingStrategy?this._activeHost=Math.floor(Math.random()*this._hosts.length):this._activeHost=0}return h(t,[{key:"_runQueue",value:function(){var t=this;if(this._queue.length&&!(this._activeTasks>=this._maxTasks)){var e=this._queue.shift(),n=this._activeHost;void 0!==e.host?n=e.host:"ROUND_ROBIN"===this._loadBalancingStrategy&&(this._activeHost=(this._activeHost+1)%this._hosts.length),this._activeTasks+=1,this._hosts[n](e.options,function(r,o){if(t._activeTasks-=1,r)t._hosts.length>1&&t._activeHost===n&&t._useFailOver&&(t._activeHost=(t._activeHost+1)%t._hosts.length),!e.host&&t._shouldRetry&&e.retries<(t._maxRetries||t._hosts.length-1)&&a(r)&&"connect"===r.syscall&&"ECONNREFUSED"===r.code?(e.retries+=1,t._queue.push(e)):e.reject(r);else{var i=o;if(503===i.statusCode&&i.headers["x-c8-endpoint"]){var u=i.headers["x-c8-endpoint"],c=t.addToHostList(u),h=s(c,1),l=h[0];e.host=l,t._activeHost===n&&(t._activeHost=l),t._queue.push(e)}else i.host=n,e.resolve(i)}t._runQueue()})}}},{key:"_buildUrl",value:function(t){var e=t.absolutePath,n=void 0!==e&&e,r=t.basePath,o=t.path,i=t.qs,a="",u=void 0;return n||(a=this._fabricPath,r&&(a+=r)),o&&(a+=o),i&&(u="string"==typeof i?"?"+i:"?"+l.stringify(i)),u?{pathname:a,search:u}:{pathname:a}}},{key:"_sanitizeEndpointUrl",value:function(t){return t.startsWith("tcp:")?t.replace(/^tcp:/,"http:"):t.startsWith("ssl:")?t.replace(/^ssl:/,"https:"):t}},{key:"addToHostList",value:function(t){var e,n,r=this,i=(Array.isArray(t)?t:[t]).map(function(t){return r._sanitizeEndpointUrl(t)}),a=i.filter(function(t){return-1===r._urls.indexOf(t)});return(e=this._urls).push.apply(e,o(a)),(n=this._hosts).push.apply(n,o(a.map(function(t){return p.createRequest(t,r._agentOptions,r._agent)}))),i.map(function(t){return r._urls.indexOf(t)})}},{key:"getFabricName",value:function(){return this._fabricName}},{key:"getTenantName",value:function(){return this._tenantName}},{key:"getUrls",value:function(){return this._urls}},{key:"getActiveHost",value:function(){return this._activeHost}},{key:"setFabricName",value:function(t){if(!1===this._fabricName)throw new Error("Can not change fabric from absolute URL");this._fabricName=t}},{key:"setTenantName",value:function(t){if(!1===this._tenantName)throw new Error("Can not change tenant from absolute URL");this._tenantName=t}},{key:"setHeader",value:function(t,e){this._headers[t]=e}},{key:"close",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this._hosts[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;i.close&&i.close()}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}}},{key:"request",value:function(t,e){var n=this,o=t.host,i=t.method,a=void 0===i?"GET":i,s=t.body,h=t.expectBinary,l=void 0!==h&&h,p=t.isBinary,d=void 0!==p&&p,v=t.headers,m=r(t,["host","method","body","expectBinary","isBinary","headers"]);return new Promise(function(t,r){var i="text/plain";d?i="application/octet-stream":s&&("object"===(void 0===s?"undefined":u(s))?(s=JSON.stringify(s),i="application/json"):s=String(s));var h=c({},n._headers,{"content-type":i,"x-c8-version":String(n._c8Version)});n._queue.push({retries:0,host:o,options:{url:n._buildUrl(m),headers:c({},h,v),method:a,expectBinary:l,body:s},reject:r,resolve:function(n){var o=n.headers["content-type"],i=void 0;if(n.body.length&&o&&o.match(y))try{i=n.body,i=JSON.parse(i)}catch(t){if(!l)return"string"!=typeof i&&(i=n.body.toString("utf-8")),t.response=n,void r(t)}else i=n.body&&!l?n.body.toString("utf-8"):n.body;i&&i.hasOwnProperty("error")&&i.hasOwnProperty("code")&&i.hasOwnProperty("errorMessage")&&i.hasOwnProperty("errorNum")?(n.body=i,r(new f.C8Error(n))):n.statusCode&&n.statusCode>=400?(n.body=i,r(new f.HttpError(n))):(l||(n.body=i),t(e?e(n):n))}}),n._runQueue()})}},{key:"_fabricPath",get:function(){return!1===this._fabricName?"":"/_tenant/"+this._tenantName+"/_fabric/"+this._fabricName}},{key:"c8Major",get:function(){return Math.floor(this._c8Version/1e4)}}]),t}();e.Connection=v},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var u=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=t.length;s>0&&c>s&&(c=s);for(var h=0;h<c;++h){var l,f,p,d,y=t[h].replace(u,"%20"),v=y.indexOf(n);v>=0?(l=y.substr(0,v),f=y.substr(v+1)):(l=y,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),r(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){switch(void 0===t?"undefined":o(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===(void 0===t?"undefined":o(t))?r(u(t),function(o){var u=encodeURIComponent(i(o))+n;return a(t[o])?r(t[o],function(t){return u+encodeURIComponent(i(t))}).join(e):u+encodeURIComponent(i(t[o]))}).join(e):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";function r(t,e){var n={},r=!0,o=!1,i=void 0;try{for(var a,u=Object.keys(t)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;e.includes(s)||(n[s]=t[s])}}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}function o(t,e){var n=a.parse(t),o=r(e,["keepAlive","keepAliveMsecs","maxSockets"]);return function(t,e){var r=t.method,c=t.url,h=t.headers,l=t.body,f=t.expectBinary,p=i({},n,{pathname:c.pathname?n.pathname?u.joinPath(n.pathname,c.pathname):c.pathname:n.pathname,search:c.search?n.search?n.search+"&"+c.search.slice(1):c.search:n.search}),d=function(t,n){d=function(){},e(t,n)},y=s.default(i({responseType:f?"blob":"text"},o,{url:a.format(p),useXDR:!0,body:l,method:r,headers:h}),function(t,e){if(t){var n=t;n.request=y,d(n)}else e.body||(e.body=""),d(null,e)})}}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(24),u=n(27),s=n(30);e.isBrowser=!0,e.createRequest=o},function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&h.isObject(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return h.isString(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function u(t,e){return t?o(t,!1,!0).resolveObject(e):e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=n(25),h=n(26);e.parse=o,e.resolve=a,e.resolveObject=u,e.format=i,e.Url=r;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(d),v=["'"].concat(y),m=["%","/","?",";","#"].concat(v),b=["/","?","#"],_=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=n(6);r.prototype.parse=function(t,e,n){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===t?"undefined":s(t)));var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(o),a=/\\/g;i[0]=i[0].replace(a,"/"),t=i.join(o);var u=t;if(u=u.trim(),!n&&1===t.split("#").length){var f=p.exec(u);if(f)return this.path=u,this.href=u,this.pathname=f[1],f[2]?(this.search=f[2],this.query=e?O.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=l.exec(u);if(d){d=d[0];var y=d.toLowerCase();this.protocol=y,u=u.substr(d.length)}if(n||d||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var q="//"===u.substr(0,2);!q||d&&x[d]||(u=u.substr(2),this.slashes=!0)}if(!x[d]&&(q||d&&!k[d])){for(var P=-1,T=0;T<b.length;T++){var E=u.indexOf(b[T]);-1!==E&&(-1===P||E<P)&&(P=E)}var S,C;C=-1===P?u.lastIndexOf("@"):u.lastIndexOf("@",P),-1!==C&&(S=u.slice(0,C),u=u.slice(C+1),this.auth=decodeURIComponent(S)),P=-1;for(var T=0;T<m.length;T++){var E=u.indexOf(m[T]);-1!==E&&(-1===P||E<P)&&(P=E)}-1===P&&(P=u.length),this.host=u.slice(0,P),u=u.slice(P),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var L=this.hostname.split(/\./),T=0,N=L.length;T<N;T++){var A=L[T];if(A&&!A.match(_)){for(var R="",M=0,D=A.length;M<D;M++)A.charCodeAt(M)>127?R+="x":R+=A[M];if(!R.match(_)){var I=L.slice(0,T),U=L.slice(T+1),H=A.match(g);H&&(I.push(H[1]),U.unshift(H[2])),U.length&&(u="/"+U.join(".")+u),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=c.toASCII(this.hostname));var F=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+F,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!w[y])for(var T=0,N=v.length;T<N;T++){var B=v[T];if(-1!==u.indexOf(B)){var Q=encodeURIComponent(B);Q===B&&(Q=escape(B)),u=u.split(B).join(Q)}}var V=u.indexOf("#");-1!==V&&(this.hash=u.substr(V),u=u.slice(0,V));var X=u.indexOf("?");if(-1!==X?(this.search=u.substr(X),this.query=u.substr(X+1),e&&(this.query=O.parse(this.query)),u=u.slice(0,X)):e&&(this.search="",this.query={}),u&&(this.pathname=u),k[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",z=this.search||"";this.path=F+z}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(i=O.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||k[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(h.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),s=0;s<u.length;s++){var c=u[s];"protocol"!==c&&(n[c]=t[c])}return k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!k[t.protocol]){for(var l=Object.keys(t),f=0;f<l.length;f++){var p=l[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||x[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",v=n.search||"";n.path=y+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=b||m||n.host&&t.pathname,g=_,w=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],O=n.protocol&&!k[n.protocol];if(O&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===w[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=t.search,n.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(O){n.hostname=n.host=w.shift();var q=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");q&&(n.auth=q.shift(),n.host=n.hostname=q.shift())}return n.search=t.search,n.query=t.query,h.isNull(n.pathname)&&h.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var P=w.slice(-1)[0],T=(n.host||t.host||w.length>1)&&("."===P||".."===P)||""===P,E=0,S=w.length;S>=0;S--)P=w[S],"."===P?w.splice(S,1):".."===P?(w.splice(S,1),E++):E&&(w.splice(S,1),E--);if(!_&&!g)for(;E--;E)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),T&&"/"!==w.join("/").substr(-1)&&w.push("");var C=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(O){n.hostname=n.host=C?"":w.length?w.shift():"";var q=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");q&&(n.auth=q.shift(),n.host=n.hostname=q.shift())}return _=_||n.host&&w.length,_&&!C&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),h.isNull(n.pathname)&&h.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";(function(t,r){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){function u(t){throw new RangeError(M[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function c(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(R,"."),r+s(t.split("."),e).join(".")}function h(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=U(t>>>10&1023|55296),t=56320|1023&t),e+=U(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:q}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,n){var r=0;for(t=n?I(t/S):t>>1,t+=I(t/e);t>D*T>>1;r+=q)t=I(t/D);return I(r+(D+1)*t/(t+E))}function y(t){var e,n,r,o,i,a,s,c,h,p,y=[],v=t.length,m=0,b=j,_=C;for(n=t.lastIndexOf(L),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&u("not-basic"),y.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=m,a=1,s=q;o>=v&&u("invalid-input"),c=f(t.charCodeAt(o++)),(c>=q||c>I((O-m)/a))&&u("overflow"),m+=c*a,h=s<=_?P:s>=_+T?T:s-_,!(c<h);s+=q)p=q-h,a>I(O/p)&&u("overflow"),a*=p;e=y.length+1,_=d(m-i,e,0==i),I(m/e)>O-b&&u("overflow"),b+=I(m/e),m%=e,y.splice(m++,0,b)}return l(y)}function v(t){var e,n,r,o,i,a,s,c,l,f,y,v,m,b,_,g=[];for(t=h(t),v=t.length,e=j,n=0,i=C,a=0;a<v;++a)(y=t[a])<128&&g.push(U(y));for(r=o=g.length,o&&g.push(L);r<v;){for(s=O,a=0;a<v;++a)(y=t[a])>=e&&y<s&&(s=y);for(m=r+1,s-e>I((O-n)/m)&&u("overflow"),n+=(s-e)*m,e=s,a=0;a<v;++a)if(y=t[a],y<e&&++n>O&&u("overflow"),y==e){for(c=n,l=q;f=l<=i?P:l>=i+T?T:l-i,!(c<f);l+=q)_=c-f,b=q-f,g.push(U(p(f+_%b,0))),c=I(_/b);g.push(U(p(c,0))),i=d(n,m,r==o),n=0,++r}++n,++e}return g.join("")}function m(t){return c(t,function(t){return N.test(t)?y(t.slice(4).toLowerCase()):t})}function b(t){return c(t,function(t){return A.test(t)?"xn--"+v(t):t})}var _="object"==i(e)&&e&&!e.nodeType&&e,g="object"==i(t)&&t&&!t.nodeType&&t,w="object"==(void 0===r?"undefined":i(r))&&r;w.global!==w&&w.window!==w&&w.self!==w||(a=w);var x,k,O=2147483647,q=36,P=1,T=26,E=38,S=700,C=72,j=128,L="-",N=/^xn--/,A=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=q-P,I=Math.floor,U=String.fromCharCode;if(x={version:"1.4.1",ucs2:{decode:h,encode:l},decode:y,encode:v,toASCII:b,toUnicode:m},"object"==i(n(8))&&n(8))void 0!==(o=function(){return x}.call(e,n,e,t))&&(t.exports=o);else if(_&&g)if(t.exports==_)g.exports=x;else for(k in x)x.hasOwnProperty(k)&&(_[k]=x[k]);else a.punycode=x}(void 0)}).call(e,n(3)(t),n(7))},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===(void 0===t?"undefined":r(t))&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(28);e.joinPath=r.join},function(t,e,n){"use strict";(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return o.exec(t).slice(1)};e.resolve=function(){for(var e="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,o="/"===a.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+e||"."},e.normalize=function(t){var o=e.isAbsolute(t),i="/"===a(t,-1);return t=n(r(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&i&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var o=r(t.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),u=a,s=0;s<a;s++)if(o[s]!==i[s]){u=s;break}for(var c=[],s=u;s<o.length;s++)c.push("..");return c=c.concat(i.slice(u)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return i(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(e,n(29))},function(t,e,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function u(){v&&d&&(v=!1,d.length?y=d.concat(y):m=-1,y.length&&s())}function s(){if(!v){var t=i(u);v=!0;for(var e=y.length;e;){for(d=y,y=[];++m<e;)d&&d[m].run();m=-1,e=y.length}d=null,v=!1,a(t)}}function c(t,e){this.fun=t,this.array=e}function h(){}var l,f,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(t){f=o}}();var d,y=[],v=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.push(new c(t,e)),1!==y.length||v||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=h,p.addListener=h,p.once=h,p.off=h,p.removeListener=h,p.removeAllListeners=h,p.emit=h,p.prependListener=h,p.prependOnceListener=h,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=n(31)},function(t,e,n){"use strict";function r(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function o(t,e,n){var r=t;return h(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=f(e,{uri:t}),r.callback=n,r}function i(t,e,n){return e=o(t,e,n),a(e)}function a(t){function e(){4===h.readyState&&setTimeout(a,0)}function n(){var t=void 0;if(t=h.response?h.response:h.responseText||u(h),g)try{t=JSON.parse(t)}catch(t){}return t}function o(t){return clearTimeout(d),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,c(t,w)}function a(){if(!p){var e;clearTimeout(d),e=t.useXDR&&void 0===h.status?200:1223===h.status?204:h.status;var r=w,o=null;return 0!==e?(r={body:n(),statusCode:e,method:v,headers:{},url:y,rawRequest:h},h.getAllResponseHeaders&&(r.headers=l(h.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),c(o,r,r.body)}}if(void 0===t.callback)throw new Error("callback argument missing");var s=!1,c=function(e,n,r){s||(s=!0,t.callback(e,n,r))},h=t.xhr||null;h||(h=t.cors||t.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var f,p,d,y=h.url=t.uri||t.url,v=h.method=t.method||"GET",m=t.body||t.data,b=h.headers=t.headers||{},_=!!t.sync,g=!1,w={body:void 0,headers:{},statusCode:0,method:v,url:y,rawRequest:h};if("json"in t&&!1!==t.json&&(g=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(!0===t.json?m:t.json))),h.onreadystatechange=e,h.onload=a,h.onerror=o,h.onprogress=function(){},h.onabort=function(){p=!0},h.ontimeout=o,h.open(v,y,!_,t.username,t.password),_||(h.withCredentials=!!t.withCredentials),!_&&t.timeout>0&&(d=setTimeout(function(){if(!p){p=!0,h.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",o(t)}},t.timeout)),h.setRequestHeader)for(f in b)b.hasOwnProperty(f)&&h.setRequestHeader(f,b[f]);else if(t.headers&&!r(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(h.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(h),h.send(m||null),h}function u(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}function s(){}var c=n(32),h=n(33),l=n(34),f=n(38);t.exports=i,t.exports.default=i,i.XMLHttpRequest=c.XMLHttpRequest||s,i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:c.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){i["delete"===t?"del":t]=function(e,n,r){return n=o(e,n,r),n.method=t.toUpperCase(),a(n)}})},function(t,e,n){"use strict";(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(e,n(7))},function(t,e,n){"use strict";function r(t){var e=o.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=r;var o=Object.prototype.toString},function(t,e,n){"use strict";var r=n(35),o=n(36),i=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};var e={};return o(r(t).split("\n"),function(t){var n=t.indexOf(":"),o=r(t.slice(0,n)).toLowerCase(),a=r(t.slice(n+1));void 0===e[o]?e[o]=a:i(e[o])?e[o].push(a):e[o]=[e[o],a]}),e}},function(t,e,n){"use strict";function r(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=r,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){"use strict";var r=n(37),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty,a=function(t,e,n){for(var r=0,o=t.length;r<o;r++)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))},u=function(t,e,n){for(var r=0,o=t.length;r<o;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)},s=function(t,e,n){for(var r in t)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))},c=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),"[object Array]"===o.call(t)?a(t,e,i):"string"==typeof t?u(t,e,i):s(t,e,i)};t.exports=c},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Function.prototype.toString,i=/^\s*class\b/,a=function(t){try{var e=o.call(t);return i.test(e)}catch(t){return!1}},u=function(t){try{return!a(t)&&(o.call(t),!0)}catch(t){return!1}},s=Object.prototype.toString,c="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag);t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!==(void 0===t?"undefined":r(t)))return!1;if("function"==typeof t&&!t.prototype)return!0;if(c)return u(t);if(a(t))return!1;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,n){"use strict";function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)o.call(n,r)&&(t[r]=n[r])}return t}t.exports=r;var o=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";function r(t,e,n){this.next=n,n&&(n.prev=this),this.prev=e,e&&(e.next=this),this.data=t}t.exports=function(){Object.defineProperty(this,"_head",{value:void 0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_tail",{value:void 0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_next",{value:void 0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_length",{value:0,writable:!0,enumerable:!1,configurable:!1})},t.exports.prototype.__defineGetter__("head",function(){return this._head&&this._head.data}),t.exports.prototype.__defineGetter__("tail",function(){return this._tail&&this._tail.data}),t.exports.prototype.__defineGetter__("current",function(){return this._current&&this._current.data}),t.exports.prototype.__defineGetter__("length",function(){return this._length}),t.exports.prototype.push=function(t){this._tail=new r(t,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++},t.exports.prototype.pop=function(){var t=this._tail;if(0!==this._length)return 0===--this._length?(this._head=this._tail=this._current=this._next=void 0,t.data):(this._tail=t.prev,this._tail.next=void 0,this._current===t&&(this._current=this._tail,this._next=void 0),t.data)},t.exports.prototype.shift=function(){var t=this._head;if(0!==this._length)return 0===--this._length?(this._head=this._tail=this._current=this._next=void 0,t.data):(this._head=this._head.next,this._current===t&&(this._current=this._head,this._next=this._current.next),t.data)},t.exports.prototype.unshift=function(t){this._head=new r(t,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++},t.exports.prototype.unshiftCurrent=function(){var t=this._current;return t===this._head||this._length<2?t&&t.data:(t===this._tail?(this._tail=t.prev,this._tail.next=void 0,this._current=this._tail):(t.next.prev=t.prev,t.prev.next=t.next,this._current=t.prev),this._next=this._current.next,t.next=this._head,t.prev=void 0,this._head.prev=t,this._head=t,t.data)},t.exports.prototype.removeCurrent=function(t){var e=this._current;if(0!==this._length)return 0===--this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)},t.exports.prototype.next=function(){var t=this._next;if(void 0!==t)return this._next=t.next,this._current=t,t.data},t.exports.prototype.resetCursor=function(){return this._current=this._next=this._head,this}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){try{var a=e[o](i),u=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(e,n,r){i(this,t),this.extra=n.extra,this._connection=e,this._result=n.result,this._hasMore=Boolean(n.hasMore),this._id=n.id,this._host=r,this.count=n.count}return a(t,[{key:"_drain",value:function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._more();case 2:if(this._hasMore){t.next=4;break}return t.abrupt("return",this);case 4:return t.abrupt("return",this._drain());case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"_more",value:function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._hasMore){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this._connection.request({method:"PUT",path:"/cursor/"+this._id,host:this._host});case 6:n=t.sent,(e=this._result).push.apply(e,r(n.body.result)),this._hasMore=n.body.hasMore;case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"delete",value:function(){return this._connection.request({method:"DELETE",path:"/cursor/"+this._id},function(t){return t.body})}},{key:"all",value:function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._drain();case 2:return e=this._result,this._result=[],t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"next",value:function(){function t(){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._result.length||!this._hasMore){t.next=5;break}return t.next=3,this._more();case 3:t.next=0;break;case 5:if(this._result.length){t.next=7;break}return t.abrupt("return",void 0);case 7:return t.abrupt("return",this._result.shift());case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"hasNext",value:function(){return Boolean(this._hasMore||this._result.length)}},{key:"each",value:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!this._result.length&&!this._hasMore){t.next=15;break}r=void 0;case 3:if(!this._result.length){t.next=10;break}if(r=e(this._result.shift(),n,this),n++,!1!==r){t.next=8;break}return t.abrupt("return",r);case 8:t.next=3;break;case 10:if(!this._hasMore){t.next=13;break}return t.next=13,this._more();case 13:t.next=1;break;case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"every",value:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!this._result.length&&!this._hasMore){t.next=15;break}r=void 0;case 3:if(!this._result.length){t.next=10;break}if(r=e(this._result.shift(),n,this),n++,r){t.next=8;break}return t.abrupt("return",!1);case 8:t.next=3;break;case 10:if(!this._hasMore){t.next=13;break}return t.next=13,this._more();case 13:t.next=1;break;case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"some",value:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!this._result.length&&!this._hasMore){t.next=15;break}r=void 0;case 3:if(!this._result.length){t.next=10;break}if(r=e(this._result.shift(),n,this),n++,!r){t.next=8;break}return t.abrupt("return",!0);case 8:t.next=3;break;case 10:if(!this._hasMore){t.next=13;break}return t.next=13,this._more();case 13:t.next=1;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"map",value:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=[];case 2:if(!this._result.length&&!this._hasMore){t.next=9;break}for(;this._result.length;)r.push(e(this._result.shift(),n,this)),n++;if(!this._hasMore){t.next=7;break}return t.next=7,this._more();case 7:t.next=2;break;case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"reduce",value:function(){function t(t,n){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=0,void 0!==n){t.next=7;break}if(this._result.length||this._hasMore){t.next=5;break}return t.next=5,this._more();case 5:n=this._result.shift(),r+=1;case 7:if(!this._result.length&&!this._hasMore){t.next=14;break}for(;this._result.length;)n=e(n,this._result.shift(),r,this),r++;if(!this._hasMore){t.next=12;break}return t.next=12,this._more();case 12:t.next=7;break;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}},t,this)}));return t}()}]),t}();e.ArrayCursor=u},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t),n?"/"!==n.charAt(0)&&(n="/"+n):n="",this._connection=e,this._path=n,this._headers=r}return u(t,[{key:"route",value:function(e,n){return e?"/"!==e.charAt(0)&&(e="/"+e):e="",new t(this._connection,this._path+e,a({},this._headers,n))}},{key:"request",value:function(t){var e=t.method,n=t.path,o=t.headers,i=void 0===o?{}:o,u=r(t,["method","path","headers"]);return n?this._path&&"/"!==n.charAt(0)?u.path="/"+n:u.path=n:u.path="",u.basePath=this._path,u.headers=a({},this._headers,i),u.method=e?e.toUpperCase():"GET",this._connection.request(u)}},{key:"_request1",value:function(t){for(var e="",n=void 0,r=void 0,o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return void 0!==a[0]&&"string"!=typeof a[0]||(e=a.shift()),void 0!==a[0]&&"object"!==i(a[0])||(n=a.shift()),void 0!==a[0]&&"object"!==i(a[0])||(r=a.shift()),this.request({method:t,path:e,qs:n,headers:r})}},{key:"_request2",value:function(t){for(var e="",n=void 0,r=void 0,o=void 0,a=arguments.length,u=Array(a>1?a-1:0),s=1;s<a;s++)u[s-1]=arguments[s];return void 0!==u[0]&&"string"!=typeof u[0]||(e=u.shift()),n=u.shift(),void 0!==u[0]&&"object"!==i(u[0])||(r=u.shift()),void 0!==u[0]&&"object"!==i(u[0])||(o=u.shift()),this.request({method:t,path:e,body:n,qs:r,headers:o})}},{key:"delete",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._request1.apply(this,["DELETE"].concat(e))}},{key:"get",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._request1.apply(this,["GET"].concat(e))}},{key:"head",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._request1.apply(this,["HEAD"].concat(e))}},{key:"patch",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._request2.apply(this,["PATCH"].concat(e))}},{key:"post",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._request2.apply(this,["POST"].concat(e))}},{key:"put",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._request2.apply(this,["PUT"].concat(e))}}]),t}();e.Route=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(e,n){r(this,t),this.user="",this.urlPrefix="/_admin/user",this.user=n,this._connection=e}return i(t,[{key:"createUser",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._connection.request({method:"POST",path:this.urlPrefix,body:{user:this.user,passwd:t,active:e,extra:n}},function(t){return t.body})}},{key:"getUserDeatils",value:function(){return this._connection.request({method:"GET",path:"/_admin/user/"+this.user},function(t){return t.body})}},{key:"deleteUser",value:function(){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user},function(t){return t.body})}},{key:"_makeModification",value:function(t,e){return this._connection.request({method:e,path:this.urlPrefix+"/"+this.user,body:o({},t)},function(t){return t.body})}},{key:"modifyUser",value:function(t){return this._makeModification(t,"PATCH")}},{key:"replaceUser",value:function(t){return this._makeModification(t,"PUT")}},{key:"getAllDatabases",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database",qs:{full:t}},function(t){return t.body})}},{key:"getDatabaseAccessLevel",value:function(t){return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database/"+t},function(t){return t.body})}},{key:"getCollectionAccessLevel",value:function(t,e){return this._connection.request({method:"GET",path:this.urlPrefix+"/"+this.user+"/database/"+t+"/"+e},function(t){return t.body})}},{key:"clearDatabaseAccessLevel",value:function(t){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user+"/database/"+t},function(t){return t.body})}},{key:"setDatabaseAccessLevel",value:function(t,e){return this._connection.request({method:"PUT",path:this.urlPrefix+"/"+this.user+"/database/"+t,body:{grant:e}},function(t){return t.body})}},{key:"clearCollectionAccessLevel",value:function(t,e){return this._connection.request({method:"DELETE",path:this.urlPrefix+"/"+this.user+"/database/"+t+"/"+e},function(t){return t.body})}},{key:"setCollectionAccessLevel",value:function(t,e,n){return this._connection.request({method:"PUT",path:this.urlPrefix+"/"+this.user+"/database/"+t+"/"+e,body:{grant:n}},function(t){return t.body})}}]),t}();e.default=a}])});
//# sourceMappingURL=web.js.map