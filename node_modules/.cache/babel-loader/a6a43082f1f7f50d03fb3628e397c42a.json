{"ast":null,"code":"import _objectSpread from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/guest/workspace/tutorials/tutorial-addressbook-restql/src/App.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport c8dbLogo from './macrometa-white-transparent.png';\nimport spinner from './circle_spinner.gif';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Fab from '@material-ui/core/Fab';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { Fabric } from \"jsc8\";\nimport Config from './Config';\nimport { deleteUtil, addOrUpdateUtil, getBaseUrl, getWsUrl, getProducerUrl, makeRegionData } from \"./util\";\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleFormChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.state = {\n      shouldShowModal: false,\n      showSnackbar: false,\n      isEdit: false,\n      snackbarText: '',\n      firstName: '',\n      lastName: '',\n      emailAddress: '',\n      firstNameHasError: false,\n      lastNameHasError: false,\n      emailAddressHasError: false,\n      data: [],\n      isLoading: true,\n      lastEditElem: null,\n      selectedRegionUrl: \"\",\n      selectedRegionName: \"\",\n      regionModal: true,\n      availableRegions: makeRegionData(Config),\n      baseUrl: '',\n      wsUrl: '',\n      producerUrl: ''\n    };\n    _this.onFabPress = _this.onFabPress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleFormChange = _this.handleFormChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSavePressed = _this.onSavePressed.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.resetModalData = _this.resetModalData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onTextInputFocus = _this.onTextInputFocus.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSocketMessageReceived = _this.onSocketMessageReceived.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.connection = undefined;\n    _this.producer = undefined;\n    _this.jwtToken = undefined;\n    _this.fabric = undefined;\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.login1();\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.connection.close();\n      this.producer.close();\n    }\n  }, {\n    key: \"login\",\n    value: function login() {\n      var _this2 = this;\n\n      var data = {\n        tenant: 'demo',\n        username: 'root',\n        password: 'demo'\n      };\n      var url = \"https://\".concat(this.state.selectedRegionUrl, \"/_tenant/_mm/_fabric/_system/_open/auth\");\n      $.ajax({\n        url: url,\n        method: 'POST',\n        data: JSON.stringify(data),\n        dataType: 'json',\n        success: function success(data) {\n          _this2.jwtToken = data.jwt;\n\n          _this2.ajaxSetup();\n\n          _this2.saveQueries();\n        },\n        error: function error() {\n          return _this2.handleSnackbar(\"Auth failed.\");\n        }\n      });\n    }\n  }, {\n    key: \"ajaxSetup\",\n    value: function ajaxSetup() {\n      $.ajaxSetup({\n        headers: {\n          Authorization: \"bearer \".concat(this.jwtToken)\n        }\n      });\n    }\n  }, {\n    key: \"login1\",\n    value: function () {\n      var _login = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"url\", \"https://\".concat(this.state.selectedRegionUrl));\n                this.fabric = new Fabric(\"https://\".concat(this.state.selectedRegionUrl));\n                _context2.next = 4;\n                return this.fabric.login(\"demo\", \"root\", \"demo\");\n\n              case 4:\n                this.fabric.useTenant(\"demo\");\n                this.fabric.useFabric(\"_system\");\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function login1() {\n        return _login.apply(this, arguments);\n      }\n\n      return login1;\n    }()\n  }, {\n    key: \"createCollection\",\n    value: function () {\n      var _createCollection = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var collection, result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                collection = this.fabric.collection('addresses');\n                _context3.next = 3;\n                return collection.exists();\n\n              case 3:\n                result = _context3.sent;\n                console.log(\"Coll Exists\", result);\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function createCollection() {\n        return _createCollection.apply(this, arguments);\n      }\n\n      return createCollection;\n    }()\n  }, {\n    key: \"saveQueries\",\n    value: function saveQueries() {\n      var url = this.state.baseUrl;\n      var self = this;\n      var readQuery = $.ajax({\n        type: \"POST\",\n        contentType: 'text/plain',\n        processData: false,\n        cache: false,\n        url: url,\n        data: JSON.stringify({\n          \"query\": {\n            \"name\": \"Read\",\n            \"parameter\": {},\n            \"value\": \"FOR entry IN addresses RETURN entry\"\n          }\n        })\n      });\n      var writeQuery = $.ajax({\n        type: \"POST\",\n        contentType: 'text/plain',\n        processData: false,\n        cache: false,\n        url: url,\n        data: JSON.stringify({\n          \"query\": {\n            \"name\": \"Write\",\n            \"parameter\": {},\n            \"value\": \"INSERT {firstname:@firstName,lastname:@lastName,email:@email} INTO addresses\"\n          }\n        })\n      });\n      var removeQuery = $.ajax({\n        type: \"POST\",\n        contentType: 'text/plain',\n        processData: false,\n        cache: false,\n        url: url,\n        data: JSON.stringify({\n          \"query\": {\n            \"name\": \"Remove\",\n            \"parameter\": {},\n            \"value\": \"REMOVE @_key IN addresses\"\n          }\n        }),\n        error: function error(data) {\n          console.log('Error:', data);\n        }\n      });\n      var updateQuery = $.ajax({\n        type: \"POST\",\n        contentType: 'text/plain',\n        processData: false,\n        cache: false,\n        url: url,\n        data: JSON.stringify({\n          \"query\": {\n            \"name\": \"Update\",\n            \"parameter\": {},\n            \"value\": \"UPDATE @_key WITH { firstname:@firstName, lastname:@lastName, email:@email} IN addresses\"\n          }\n        })\n      });\n      $.when(readQuery, writeQuery, updateQuery, removeQuery).done(function (r1, r2, r3, r4) {\n        self.initWebSocket();\n        self.fetchData();\n      });\n    }\n  }, {\n    key: \"initWebSocket\",\n    value: function initWebSocket() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          wsUrl = _this$state.wsUrl,\n          producerUrl = _this$state.producerUrl;\n      this.connection = new WebSocket(wsUrl);\n      this.connection.onmessage = this.onSocketMessageReceived;\n\n      this.connection.onopen = function () {\n        return console.log(\"WS connection established\");\n      };\n\n      this.connection.onerror = function () {\n        return console.log(\"Failed to establish WS connection\");\n      };\n\n      this.connection.onclose = function () {\n        return console.log(\"Closing WS connection\");\n      };\n\n      this.producer = new WebSocket(producerUrl);\n\n      this.producer.onopen = function () {\n        setInterval(function () {\n          _this3.producer.send(JSON.stringify({\n            'payload': 'noop'\n          }));\n        }, 30000);\n      };\n    }\n  }, {\n    key: \"deleteData\",\n    value: function deleteData(key) {\n      this.setState({\n        data: deleteUtil(key, this.state.data)\n      });\n    }\n  }, {\n    key: \"addOrUpdateData\",\n    value: function addOrUpdateData(payload) {\n      this.setState({\n        data: addOrUpdateUtil(payload, this.state.data)\n      });\n    }\n  }, {\n    key: \"onSocketMessageReceived\",\n    value: function onSocketMessageReceived(message) {\n      var receiveMsg = JSON.parse(message.data);\n      var ackMsg = {\n        \"messageId\": receiveMsg.messageId\n      };\n      this.connection.send(JSON.stringify(ackMsg));\n\n      if (receiveMsg.payload !== 'noop') {\n        var payload = JSON.parse(atob(receiveMsg.payload));\n        payload._delete ? this.deleteData(payload._key) : this.addOrUpdateData(payload);\n      }\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData(isDialog) {\n      var self = this;\n      var url = this.state.baseUrl;\n      url = url + \"/execute/Read\";\n      this.setState({\n        isLoading: true\n      }, function () {\n        $.ajax({\n          type: \"POST\",\n          contentType: 'text/plain',\n          processData: false,\n          cache: false,\n          url: url,\n          data: JSON.stringify({}),\n          success: function success(data) {\n            self.resetModalData();\n            self.setState({\n              isLoading: false,\n              data: data.result\n            });\n          },\n          error: function error(data) {\n            if (isDialog) {\n              self.resetModalData();\n            }\n\n            self.setState({\n              isLoading: false\n            });\n            self.handleSnackbar(\"Could not fetch data\");\n            console.log('Error:', data);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"onFabPress\",\n    value: function onFabPress() {\n      this.setState({\n        shouldShowModal: true\n      });\n    }\n  }, {\n    key: \"resetModalData\",\n    value: function resetModalData() {\n      this.setState({\n        lastEditElem: undefined,\n        shouldShowModal: false,\n        isEdit: false,\n        firstName: '',\n        lastName: '',\n        emailAddress: '',\n        firstNameHasError: false,\n        lastNameHasError: false,\n        emailAddressHasError: false\n      });\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var _this$state2 = this.state,\n          firstName = _this$state2.firstName,\n          lastName = _this$state2.lastName,\n          emailAddress = _this$state2.emailAddress;\n      var validationObject = {};\n\n      if (!this.state.isEdit) {\n        if (!firstName.trim()) {\n          validationObject.firstNameHasError = true;\n        }\n\n        if (!lastName.trim()) {\n          validationObject.lastNameHasError = true;\n        }\n\n        if (!emailAddress.trim()) {\n          validationObject.emailAddressHasError = true;\n        }\n      } else {\n        if (!this.state.lastEditElem.email.trim()) {\n          validationObject.emailAddressHasError = true;\n        }\n      }\n\n      return validationObject;\n    }\n  }, {\n    key: \"onSavePressed\",\n    value: function onSavePressed() {\n      var self = this;\n      var url = this.state.baseUrl;\n      var validationObject = this.validate();\n\n      if (Object.keys(validationObject).length === 0) {\n        var snackbarTextSuccess = 'Contact details added successfully';\n        var snackbarTextFail = 'Contact details could not be added';\n        var _this$state3 = this.state,\n            firstName = _this$state3.firstName,\n            lastName = _this$state3.lastName,\n            emailAddress = _this$state3.emailAddress,\n            isEdit = _this$state3.isEdit;\n        var name = \"Write\";\n        var postData = {\n          \"firstName\": firstName,\n          \"lastName\": lastName,\n          \"email\": emailAddress\n        };\n\n        if (isEdit) {\n          name = \"Update\";\n          var _this$state$lastEditE = this.state.lastEditElem,\n              _key = _this$state$lastEditE._key,\n              firstname = _this$state$lastEditE.firstname,\n              lastname = _this$state$lastEditE.lastname,\n              email = _this$state$lastEditE.email;\n          postData = {\n            \"_key\": _key,\n            \"firstName\": firstname,\n            \"lastName\": lastname,\n            \"email\": email\n          };\n          snackbarTextSuccess = 'Contact details updated successfully';\n          snackbarTextFail = 'Contact details could not be updated';\n        }\n\n        url = url + \"/execute/\" + name;\n        console.log(\"URL\", url);\n        $.ajax({\n          type: \"POST\",\n          contentType: 'text/plain',\n          processData: false,\n          cache: false,\n          url: url,\n          data: JSON.stringify({\n            \"bindVars\": postData\n          }),\n          success: function success() {\n            self.handleSnackbar(snackbarTextSuccess);\n            self.resetModalData();\n          },\n          error: function error(data) {\n            self.handleSnackbar(snackbarTextFail);\n            self.resetModalData();\n            console.log('Error:', data);\n          }\n        });\n      } else {\n        //show error\n        this.setState(_objectSpread({}, validationObject));\n      }\n    }\n  }, {\n    key: \"onTextInputFocus\",\n    value: function onTextInputFocus(name) {\n      if (this.state[\"\".concat(name, \"HasError\")]) {\n        this.setState(_defineProperty({}, \"\".concat(name, \"HasError\"), false));\n      }\n    }\n  }, {\n    key: \"onEditPressed\",\n    value: function onEditPressed(element) {\n      if (element) {\n        //show edit modal\n        this.setState({\n          shouldShowModal: true,\n          isEdit: true,\n          lastEditElem: element\n        });\n      }\n    }\n  }, {\n    key: \"onRemovePressed\",\n    value: function onRemovePressed(element) {\n      var self = this;\n      var url = this.state.baseUrl;\n      url = url + \"/execute/Remove\";\n      var postData = \"{\\\"_key\\\": \\\"\".concat(element._key, \"\\\"}\");\n\n      if (element) {\n        this.setState({\n          lastEditElem: element\n        }, function () {\n          $.ajax({\n            type: \"POST\",\n            contentType: 'text/plain',\n            processData: false,\n            cache: false,\n            url: url,\n            data: JSON.stringify({\n              \"bindVars\": JSON.parse(postData)\n            }),\n            success: function success() {\n              self.handleSnackbar(\"Contact details removed successfully\");\n              self.resetModalData();\n            },\n            error: function error(data) {\n              self.handleSnackbar(\"Contact details could not be removed\");\n              self.resetModalData();\n              console.log('Error:', data);\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"handleSnackbar\",\n    value: function handleSnackbar(snackbarText) {\n      var _this4 = this;\n\n      this.setState({\n        showSnackbar: true,\n        snackbarText: snackbarText\n      }, function () {\n        setTimeout(function () {\n          _this4.setState({\n            showSnackbar: false,\n            snackbarText: ''\n          });\n        }, 2000);\n      });\n    }\n  }, {\n    key: \"renderDialogContent\",\n    value: function renderDialogContent() {\n      var _this5 = this;\n\n      var _ref = this.state.lastEditElem || {},\n          firstname = _ref.firstname,\n          lastname = _ref.lastname,\n          email = _ref.email;\n\n      var dialogContent = React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434\n        },\n        __self: this\n      }, this.state.isEdit ? 'Fill in the fields to be updated.' : 'Provide all the details to add a new contact.'), React.createElement(TextField, {\n        onFocus: function onFocus() {\n          return _this5.onTextInputFocus(\"firstName\");\n        },\n        required: !this.state.isEdit,\n        error: this.state.firstNameHasError,\n        style: {\n          display: 'block'\n        },\n        label: \"First Name\",\n        value: this.state.isEdit ? firstname : this.state.firstName,\n        onChange: function onChange(event) {\n          if (_this5.state.isEdit) {\n            var newLastEditElem = _objectSpread({}, _this5.state.lastEditElem);\n\n            newLastEditElem.firstname = event.target.value;\n\n            _this5.setState({\n              lastEditElem: newLastEditElem\n            });\n          } else {\n            _this5.handleFormChange('firstName')(event);\n          }\n        },\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        onFocus: function onFocus() {\n          return _this5.onTextInputFocus(\"lastName\");\n        },\n        required: !this.state.isEdit,\n        error: this.state.lastNameHasError,\n        style: {\n          display: 'block'\n        },\n        label: \"Last Name\",\n        value: this.state.isEdit ? lastname : this.state.lastName,\n        onChange: function onChange(event) {\n          if (_this5.state.isEdit) {\n            var newLastEditElem = _objectSpread({}, _this5.state.lastEditElem);\n\n            newLastEditElem.lastname = event.target.value;\n\n            _this5.setState({\n              lastEditElem: newLastEditElem\n            });\n          } else {\n            _this5.handleFormChange('lastName')(event);\n          }\n        },\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        onFocus: function onFocus() {\n          return _this5.onTextInputFocus(\"emailAddress\");\n        },\n        required: true,\n        error: this.state.emailAddressHasError,\n        style: {\n          display: 'block'\n        },\n        label: \"Email\",\n        value: this.state.isEdit ? email : this.state.emailAddress,\n        onChange: function onChange(event) {\n          if (_this5.state.isEdit) {\n            var newLastEditElem = _objectSpread({}, _this5.state.lastEditElem);\n\n            newLastEditElem.email = event.target.value;\n\n            _this5.setState({\n              lastEditElem: newLastEditElem\n            });\n          } else {\n            _this5.handleFormChange('emailAddress')(event);\n          }\n        },\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473\n        },\n        __self: this\n      }));\n      return dialogContent;\n    }\n  }, {\n    key: \"handleModalClose\",\n    value: function handleModalClose() {\n      var _this6 = this;\n\n      var selectedRegionUrl = this.state.selectedRegionUrl;\n      this.setState({\n        regionModal: false,\n        baseUrl: getBaseUrl(selectedRegionUrl),\n        wsUrl: getWsUrl(selectedRegionUrl),\n        producerUrl: getProducerUrl(selectedRegionUrl)\n      }, function () {\n        _this6.login();\n      });\n    }\n  }, {\n    key: \"renderRegionModal\",\n    value: function renderRegionModal() {\n      var _this7 = this;\n\n      var _this$state4 = this.state,\n          regionModal = _this$state4.regionModal,\n          availableRegions = _this$state4.availableRegions,\n          selectedRegionUrl = _this$state4.selectedRegionUrl;\n      return React.createElement(Dialog, {\n        fullWidth: true,\n        open: regionModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"form-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515\n        },\n        __self: this\n      }, \"Select Region:\"), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516\n        },\n        __self: this\n      }, React.createElement(RadioGroup, {\n        onChange: function onChange(event) {\n          var selectedRegionUrl = event.target.value;\n          var selectedRegionName = availableRegions.find(function (elem) {\n            return elem.value === selectedRegionUrl;\n          }).label;\n\n          _this7.setState({\n            selectedRegionUrl: selectedRegionUrl,\n            selectedRegionName: selectedRegionName\n          });\n        },\n        value: selectedRegionUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517\n        },\n        __self: this\n      }, availableRegions.map(function (region) {\n        return React.createElement(FormControlLabel, {\n          key: region.label,\n          value: region.value,\n          control: React.createElement(Radio, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 527\n            },\n            __self: this\n          }),\n          label: region.label,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 527\n          },\n          __self: this\n        });\n      }))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: !selectedRegionUrl,\n        onClick: function onClick() {\n          return _this7.handleModalClose();\n        },\n        size: \"small\",\n        variant: \"text\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536\n        },\n        __self: this\n      }, \"CONFIRM\"))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      var _this$state5 = this.state,\n          data = _this$state5.data,\n          selectedRegionName = _this$state5.selectedRegionName;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"App-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: c8dbLogo,\n        alt: \"logo\",\n        style: {\n          height: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        className: \"App-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550\n        },\n        __self: this\n      }, \"Address book is connected to \", selectedRegionName)), this.renderRegionModal(), React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557\n        },\n        __self: this\n      }, \"KEY\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558\n        },\n        __self: this\n      }, \"First Name\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559\n        },\n        __self: this\n      }, \"Last Name\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560\n        },\n        __self: this\n      }, \"Email\"), React.createElement(TableCell, {\n        style: {\n          paddingLeft: '40px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564\n        },\n        __self: this\n      }, data.map(function (n) {\n        return React.createElement(TableRow, {\n          key: Math.random(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 567\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568\n          },\n          __self: this\n        }, n._key), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571\n          },\n          __self: this\n        }, n.firstname), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 572\n          },\n          __self: this\n        }, n.lastname), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 573\n          },\n          __self: this\n        }, n.email), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 574\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 575\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            _this8.onEditPressed(n);\n          },\n          size: \"small\",\n          variant: \"text\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 576\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            fontSize: \"10px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579\n          },\n          __self: this\n        }, \"Edit\")), React.createElement(Button, {\n          onClick: function onClick() {\n            _this8.onRemovePressed(n);\n          },\n          size: \"small\",\n          variant: \"text\",\n          color: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 581\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            fontSize: \"10px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 584\n          },\n          __self: this\n        }, \"Remove\")))));\n      })))), React.createElement(Fab, {\n        onClick: this.onFabPress,\n        style: {\n          position: 'fixed',\n          bottom: '70px',\n          right: '70px'\n        },\n        size: \"large\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 594\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597\n        },\n        __self: this\n      }, \"+\")), React.createElement(Dialog, {\n        onClose: this.resetModalData,\n        open: this.state.shouldShowModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 600\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"form-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604\n        },\n        __self: this\n      }, this.state.isEdit ? 'Edit contact details' : 'Add contact details'), this.renderDialogContent(), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: function onClick() {\n          _this8.onSavePressed();\n        },\n        size: \"small\",\n        variant: \"text\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 607\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610\n        },\n        __self: this\n      }, this.state.isEdit ? 'UPDATE' : 'SAVE')), React.createElement(Button, {\n        onClick: this.resetModalData,\n        size: \"small\",\n        variant: \"text\",\n        color: \"secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615\n        },\n        __self: this\n      }, \"DISCARD\")))), React.createElement(Snackbar, {\n        open: this.state.showSnackbar,\n        onClose: this.handleClose,\n        ContentProps: {\n          'aria-describedby': 'message-id'\n        },\n        message: React.createElement(\"span\", {\n          id: \"message-id\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 626\n          },\n          __self: this\n        }, this.state.snackbarText),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620\n        },\n        __self: this\n      }), this.state.isLoading && React.createElement(\"img\", {\n        src: spinner,\n        alt: \"logo\",\n        className: \"spinner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/guest/workspace/tutorials/tutorial-addressbook-restql/src/App.js"],"names":["React","Component","$","c8dbLogo","spinner","Button","TextField","Table","TableBody","TableCell","TableHead","TableRow","Paper","Fab","Snackbar","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Radio","RadioGroup","FormControlLabel","Fabric","Config","deleteUtil","addOrUpdateUtil","getBaseUrl","getWsUrl","getProducerUrl","makeRegionData","App","props","handleFormChange","name","event","setState","target","value","state","shouldShowModal","showSnackbar","isEdit","snackbarText","firstName","lastName","emailAddress","firstNameHasError","lastNameHasError","emailAddressHasError","data","isLoading","lastEditElem","selectedRegionUrl","selectedRegionName","regionModal","availableRegions","baseUrl","wsUrl","producerUrl","onFabPress","bind","onSavePressed","resetModalData","fetchData","onTextInputFocus","onSocketMessageReceived","connection","undefined","producer","jwtToken","fabric","login1","close","tenant","username","password","url","ajax","method","JSON","stringify","dataType","success","jwt","ajaxSetup","saveQueries","error","handleSnackbar","headers","Authorization","console","log","login","useTenant","useFabric","collection","exists","result","self","readQuery","type","contentType","processData","cache","writeQuery","removeQuery","updateQuery","when","done","r1","r2","r3","r4","initWebSocket","WebSocket","onmessage","onopen","onerror","onclose","setInterval","send","key","payload","message","receiveMsg","parse","ackMsg","messageId","atob","_delete","deleteData","_key","addOrUpdateData","isDialog","validationObject","trim","email","validate","Object","keys","length","snackbarTextSuccess","snackbarTextFail","postData","firstname","lastname","element","setTimeout","dialogContent","display","newLastEditElem","find","elem","label","map","region","handleModalClose","height","renderRegionModal","paddingLeft","n","Math","random","onEditPressed","fontSize","onRemovePressed","position","bottom","right","renderDialogContent","handleClose"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery'\nimport c8dbLogo from './macrometa-white-transparent.png';\nimport spinner from './circle_spinner.gif';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Fab from '@material-ui/core/Fab';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nimport { Fabric } from \"jsc8\";\n\nimport Config from './Config';\n\nimport {\ndeleteUtil,\naddOrUpdateUtil,\ngetBaseUrl,\ngetWsUrl,\ngetProducerUrl,\nmakeRegionData\n} from \"./util\";\n\nimport './App.css';\n\nclass App extends Component {\n\nconstructor(props) {\nsuper(props);\nthis.state = {\nshouldShowModal: false,\nshowSnackbar: false,\nisEdit: false,\nsnackbarText: '',\nfirstName: '',\nlastName: '',\nemailAddress: '',\nfirstNameHasError: false,\nlastNameHasError: false,\nemailAddressHasError: false,\ndata: [],\nisLoading: true,\nlastEditElem: null,\nselectedRegionUrl: \"\",\nselectedRegionName: \"\",\nregionModal: true,\navailableRegions: makeRegionData(Config),\nbaseUrl: '',\nwsUrl: '',\nproducerUrl: ''\n};\n\nthis.onFabPress = this.onFabPress.bind(this);\nthis.handleFormChange = this.handleFormChange.bind(this);\nthis.onSavePressed = this.onSavePressed.bind(this);\nthis.resetModalData = this.resetModalData.bind(this);\nthis.fetchData = this.fetchData.bind(this);\nthis.onTextInputFocus = this.onTextInputFocus.bind(this);\nthis.onSocketMessageReceived = this.onSocketMessageReceived.bind(this);\nthis.connection = undefined;\nthis.producer = undefined;\nthis.jwtToken = undefined;\nthis.fabric = undefined;\n}\n\n\nasync componentDidMount() {\nawait this.login1();\n\n}\n\ncomponentWillUnmount() {\nthis.connection.close();\nthis.producer.close();\n}\n\n\n\nlogin() {\nconst data = {\ntenant: 'demo',\nusername: 'root',\npassword: 'demo'\n}\nconst url = `https://${this.state.selectedRegionUrl}/_tenant/_mm/_fabric/_system/_open/auth`;\n$.ajax({\nurl,\nmethod: 'POST',\ndata: JSON.stringify(data),\ndataType: 'json',\nsuccess: (data) => {\nthis.jwtToken = data.jwt;\nthis.ajaxSetup();\nthis.saveQueries()\n},\nerror: () => this.handleSnackbar(\"Auth failed.\")\n})\n}\n\najaxSetup() {\n$.ajaxSetup({\nheaders: {\nAuthorization: `bearer ${this.jwtToken}`\n}\n});\n}\n\nasync login1() {\n  console.log(\"url\",`https://${this.state.selectedRegionUrl}`)\n  this.fabric = new Fabric(`https://${this.state.selectedRegionUrl}`);\n  await this.fabric.login(\"demo\", \"root\", \"demo\");\n  this.fabric.useTenant(\"demo\");\n  this.fabric.useFabric(\"_system\");\n  }\n\nasync createCollection() {\nconst collection = this.fabric.collection('addresses');\nconst result = await collection.exists();\nconsole.log(\"Coll Exists\", result)\n\n}\n\nsaveQueries() {\n\nconst { baseUrl: url } = this.state;\nconst self = this;\n\nvar readQuery = $.ajax({\ntype: \"POST\",\ncontentType: 'text/plain',\nprocessData: false,\ncache: false,\nurl,\ndata: JSON.stringify({\n\"query\": {\n\"name\": \"Read\",\n\"parameter\": {},\n\"value\": \"FOR entry IN addresses RETURN entry\"\n}\n})\n});\n\nvar writeQuery = $.ajax({\ntype: \"POST\",\ncontentType: 'text/plain',\nprocessData: false,\ncache: false,\nurl,\ndata: JSON.stringify({\n\"query\": {\n\"name\": \"Write\",\n\"parameter\": {},\n\"value\": \"INSERT {firstname:@firstName,lastname:@lastName,email:@email} INTO addresses\"\n}\n})\n});\n\nvar removeQuery = $.ajax({\ntype: \"POST\",\ncontentType: 'text/plain',\nprocessData: false,\ncache: false,\nurl,\ndata: JSON.stringify({\n\"query\": {\n\"name\": \"Remove\",\n\"parameter\": {},\n\"value\": \"REMOVE @_key IN addresses\"\n}\n}),\nerror: function (data) {\nconsole.log('Error:', data);\n}\n});\n\nvar updateQuery = $.ajax({\ntype: \"POST\",\ncontentType: 'text/plain',\nprocessData: false,\ncache: false,\nurl,\ndata: JSON.stringify({\n\"query\": {\n\"name\": \"Update\",\n\"parameter\": {},\n\"value\": \"UPDATE @_key WITH { firstname:@firstName, lastname:@lastName, email:@email} IN addresses\"\n}\n}\n)\n});\n\n$.when(readQuery, writeQuery, updateQuery, removeQuery).done(function (r1, r2, r3, r4) {\nself.initWebSocket();\nself.fetchData();\n});\n\n}\n\ninitWebSocket() {\nconst { wsUrl, producerUrl } = this.state;\nthis.connection = new WebSocket(wsUrl);\n\nthis.connection.onmessage = this.onSocketMessageReceived;\n\nthis.connection.onopen = () => console.log(\"WS connection established\");\n\nthis.connection.onerror = () => console.log(\"Failed to establish WS connection\");\n\nthis.connection.onclose = () => console.log(\"Closing WS connection\");\n\nthis.producer = new WebSocket(producerUrl);\n\nthis.producer.onopen = () => {\nsetInterval(() => {\nthis.producer.send(JSON.stringify({ 'payload': 'noop' }))\n}, 30000);\n}\n\n}\n\ndeleteData(key) {\nthis.setState({ data: deleteUtil(key, this.state.data) });\n}\n\naddOrUpdateData(payload) {\nthis.setState({ data: addOrUpdateUtil(payload, this.state.data) });\n}\n\nonSocketMessageReceived(message) {\nvar receiveMsg = JSON.parse(message.data);\nconst ackMsg = { \"messageId\": receiveMsg.messageId };\nthis.connection.send(JSON.stringify(ackMsg));\nif (receiveMsg.payload !== 'noop') {\nconst payload = JSON.parse(atob(receiveMsg.payload));\npayload._delete ? this.deleteData(payload._key) : this.addOrUpdateData(payload);\n}\n}\n\nfetchData(isDialog) {\nvar self = this;\nlet { baseUrl: url } = this.state;\nurl = url + \"/execute/Read\"\nthis.setState({ isLoading: true }, () => {\n$.ajax({\ntype: \"POST\",\ncontentType: 'text/plain',\nprocessData: false,\ncache: false,\nurl,\ndata: JSON.stringify({}),\nsuccess: function (data) {\nself.resetModalData();\nself.setState({\nisLoading: false,\ndata: data.result\n});\n},\nerror: function (data) {\nif (isDialog) {\nself.resetModalData();\n}\nself.setState({\nisLoading: false,\n});\nself.handleSnackbar(\"Could not fetch data\");\nconsole.log('Error:', data);\n}\n});\n});\n}\n\nonFabPress() {\nthis.setState({ shouldShowModal: true })\n}\n\nresetModalData() {\nthis.setState({\nlastEditElem: undefined,\nshouldShowModal: false,\nisEdit: false,\nfirstName: '',\nlastName: '',\nemailAddress: '',\nfirstNameHasError: false,\nlastNameHasError: false,\nemailAddressHasError: false\n});\n}\n\nhandleFormChange = name => event => {\nthis.setState({\n[name]: event.target.value,\n});\n}\n\nvalidate() {\nconst { firstName, lastName, emailAddress } = this.state;\nconst validationObject = {};\nif (!this.state.isEdit) {\nif (!firstName.trim()) {\nvalidationObject.firstNameHasError = true;\n}\nif (!lastName.trim()) {\nvalidationObject.lastNameHasError = true;\n}\nif (!emailAddress.trim()) {\nvalidationObject.emailAddressHasError = true;\n}\n}\nelse {\nif (!this.state.lastEditElem.email.trim()) {\nvalidationObject.emailAddressHasError = true;\n}\n}\n\nreturn validationObject;\n}\n\nonSavePressed() {\n\nconst self = this;\nlet { baseUrl: url } = this.state;\nconst validationObject = this.validate();\nif (Object.keys(validationObject).length === 0) {\n\nlet snackbarTextSuccess = 'Contact details added successfully';\nlet snackbarTextFail = 'Contact details could not be added';\nconst { firstName, lastName, emailAddress, isEdit } = this.state;\nlet name = \"Write\";\nlet postData = { \"firstName\": firstName, \"lastName\": lastName, \"email\": emailAddress };\nif (isEdit) {\nname = \"Update\";\nconst { lastEditElem: { _key, firstname, lastname, email } } = this.state;\npostData = { \"_key\": _key, \"firstName\": firstname, \"lastName\": lastname, \"email\": email };\nsnackbarTextSuccess = 'Contact details updated successfully';\nsnackbarTextFail = 'Contact details could not be updated';\n}\nurl = url + \"/execute/\" + name\nconsole.log(\"URL\", url)\n$.ajax({\ntype: \"POST\",\ncontentType: 'text/plain',\nprocessData: false,\ncache: false,\nurl,\ndata: JSON.stringify({ \"bindVars\": postData }),\nsuccess: function () {\nself.handleSnackbar(snackbarTextSuccess);\nself.resetModalData();\n},\nerror: function (data) {\nself.handleSnackbar(snackbarTextFail);\nself.resetModalData();\nconsole.log('Error:', data);\n}\n});\n\n}\nelse {\n//show error\nthis.setState({ ...validationObject });\n}\n}\n\nonTextInputFocus(name) {\nif (this.state[`${name}HasError`]) {\nthis.setState({ [`${name}HasError`]: false });\n}\n}\n\nonEditPressed(element) {\nif (element) {\n//show edit modal\nthis.setState({ shouldShowModal: true, isEdit: true, lastEditElem: element });\n}\n}\n\nonRemovePressed(element) {\nconst self = this;\nlet { baseUrl: url } = this.state;\nurl = url + \"/execute/Remove\"\nlet postData = `{\"_key\": \"${element._key}\"}`\nif (element) {\nthis.setState({ lastEditElem: element }, () => {\n$.ajax({\ntype: \"POST\",\ncontentType: 'text/plain',\nprocessData: false,\ncache: false,\nurl,\ndata: JSON.stringify({ \"bindVars\": JSON.parse(postData) }),\nsuccess: function () {\nself.handleSnackbar(\"Contact details removed successfully\");\nself.resetModalData();\n},\nerror: function (data) {\nself.handleSnackbar(\"Contact details could not be removed\");\nself.resetModalData();\nconsole.log('Error:', data);\n}\n});\n});\n}\n}\n\nhandleSnackbar(snackbarText) {\nthis.setState({ showSnackbar: true, snackbarText: snackbarText }, () => {\nsetTimeout(() => {\nthis.setState({ showSnackbar: false, snackbarText: '' });\n}, 2000);\n});\n};\n\nrenderDialogContent() {\nconst { firstname, lastname, email } = (this.state.lastEditElem || {});\nlet dialogContent = (\n<DialogContent>\n<DialogContentText>\n{this.state.isEdit ? 'Fill in the fields to be updated.' : 'Provide all the details to add a new contact.'}\n</DialogContentText>\n<TextField\nonFocus={() => this.onTextInputFocus(\"firstName\")}\nrequired={!this.state.isEdit}\nerror={this.state.firstNameHasError}\nstyle={{ display: 'block' }}\nlabel=\"First Name\"\nvalue={this.state.isEdit ? firstname : this.state.firstName}\nonChange={(event) => {\nif (this.state.isEdit) {\nconst newLastEditElem = { ...this.state.lastEditElem };\nnewLastEditElem.firstname = event.target.value;\nthis.setState({ lastEditElem: newLastEditElem });\n} else {\nthis.handleFormChange('firstName')(event);\n}\n}}\nmargin=\"normal\"\n/>\n<TextField\nonFocus={() => this.onTextInputFocus(\"lastName\")}\nrequired={!this.state.isEdit}\nerror={this.state.lastNameHasError}\nstyle={{ display: 'block' }}\nlabel=\"Last Name\"\nvalue={this.state.isEdit ? lastname : this.state.lastName}\nonChange={(event) => {\nif (this.state.isEdit) {\nconst newLastEditElem = { ...this.state.lastEditElem };\nnewLastEditElem.lastname = event.target.value;\nthis.setState({ lastEditElem: newLastEditElem });\n} else {\nthis.handleFormChange('lastName')(event);\n}\n}}\nmargin=\"normal\"\n/>\n<TextField\nonFocus={() => this.onTextInputFocus(\"emailAddress\")}\nrequired\nerror={this.state.emailAddressHasError}\nstyle={{ display: 'block' }}\nlabel=\"Email\"\nvalue={this.state.isEdit ? email : this.state.emailAddress}\nonChange={(event) => {\nif (this.state.isEdit) {\nconst newLastEditElem = { ...this.state.lastEditElem };\nnewLastEditElem.email = event.target.value;\nthis.setState({ lastEditElem: newLastEditElem });\n} else {\nthis.handleFormChange('emailAddress')(event);\n}\n}}\nmargin=\"normal\"\n/>\n</DialogContent>\n);\nreturn dialogContent;\n}\n\nhandleModalClose() {\nconst { selectedRegionUrl } = this.state;\nthis.setState({\nregionModal: false,\nbaseUrl: getBaseUrl(selectedRegionUrl),\nwsUrl: getWsUrl(selectedRegionUrl),\nproducerUrl: getProducerUrl(selectedRegionUrl)\n}, () => {\nthis.login();\n});\n}\n\nrenderRegionModal() {\nconst { regionModal, availableRegions, selectedRegionUrl } = this.state;\nreturn (\n<Dialog\nfullWidth\nopen={regionModal}\n>\n<DialogTitle id=\"form-dialog-title\">Select Region:</DialogTitle>\n<DialogContent>\n<RadioGroup\nonChange={event => {\nconst selectedRegionUrl = event.target.value;\nconst selectedRegionName = availableRegions.find(elem => elem.value === selectedRegionUrl).label;\nthis.setState({ selectedRegionUrl, selectedRegionName })\n}\n}\nvalue={selectedRegionUrl}\n>\n{\navailableRegions.map(region => <FormControlLabel key={region.label} value={region.value} control={<Radio />} label={region.label} />)\n}\n</RadioGroup>\n</DialogContent>\n<DialogActions>\n<Button\ndisabled={!selectedRegionUrl}\nonClick={() => this.handleModalClose()}\nsize=\"small\" variant=\"text\" color=\"primary\">\n<span className=\"actions\">CONFIRM</span>\n</Button>\n</DialogActions>\n</Dialog>\n)\n}\n\nrender() {\nconst { data, selectedRegionName } = this.state;\n\nreturn (\n<div className=\"App\">\n<header className=\"App-header\">\n<img src={c8dbLogo} alt=\"logo\" style={{ height: '100px' }} />\n<h1 className=\"App-title\">Address book is connected to {selectedRegionName}</h1>\n</header>\n{this.renderRegionModal()}\n<Paper>\n<Table>\n<TableHead>\n<TableRow>\n<TableCell>KEY</TableCell>\n<TableCell>First Name</TableCell>\n<TableCell>Last Name</TableCell>\n<TableCell>Email</TableCell>\n<TableCell style={{ paddingLeft: '40px' }}>Actions</TableCell>\n</TableRow>\n</TableHead>\n<TableBody>\n{data.map(n => {\nreturn (\n<TableRow key={Math.random()}>\n<TableCell component=\"th\" scope=\"row\">\n{n._key}\n</TableCell>\n<TableCell>{n.firstname}</TableCell>\n<TableCell>{n.lastname}</TableCell>\n<TableCell>{n.email}</TableCell>\n<TableCell>{\n<div>\n<Button\nonClick={() => { this.onEditPressed(n) }}\nsize=\"small\" variant=\"text\" color=\"primary\">\n<span style={{ fontSize: \"10px\" }}>Edit</span>\n</Button>\n<Button\nonClick={() => { this.onRemovePressed(n) }}\nsize=\"small\" variant=\"text\" color=\"secondary\">\n<span style={{ fontSize: \"10px\" }}>Remove</span>\n</Button>\n</div>\n}</TableCell>\n</TableRow>\n);\n})}\n</TableBody>\n</Table>\n</Paper>\n<Fab\nonClick={this.onFabPress}\nstyle={{ position: 'fixed', bottom: '70px', right: '70px' }} size=\"large\" color=\"primary\">\n<span style={{ fontSize: \"30px\" }}>+</span>\n</Fab>\n{/* add new contact dialog*/}\n<Dialog\nonClose={this.resetModalData}\nopen={this.state.shouldShowModal}\n>\n<DialogTitle id=\"form-dialog-title\">{this.state.isEdit ? 'Edit contact details' : 'Add contact details'}</DialogTitle>\n{this.renderDialogContent()}\n<DialogActions>\n<Button\nonClick={() => { this.onSavePressed() }}\nsize=\"small\" variant=\"text\" color=\"primary\">\n<span className=\"actions\">{this.state.isEdit ? 'UPDATE' : 'SAVE'}</span>\n</Button>\n<Button\nonClick={this.resetModalData}\nsize=\"small\" variant=\"text\" color=\"secondary\">\n<span className=\"actions\">DISCARD</span>\n</Button>\n</DialogActions>\n</Dialog>\n\n<Snackbar\nopen={this.state.showSnackbar}\nonClose={this.handleClose}\nContentProps={{\n'aria-describedby': 'message-id',\n}}\nmessage={<span id=\"message-id\">{this.state.snackbarText}</span>}\n/>\n{\nthis.state.isLoading && <img src={spinner} alt=\"logo\" className=\"spinner\" />}\n</div>\n);\n}\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}