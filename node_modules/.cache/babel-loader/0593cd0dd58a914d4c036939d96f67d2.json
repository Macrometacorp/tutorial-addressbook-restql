{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar collection_1 = require(\"./collection\");\n\nfunction isC8QLQuery(query) {\n  return Boolean(query && query.query && query.bindVars);\n}\n\nexports.isC8QLQuery = isC8QLQuery;\n\nfunction isC8QLLiteral(literal) {\n  return Boolean(literal && typeof literal.toC8QL === \"function\");\n}\n\nexports.isC8QLLiteral = isC8QLLiteral;\n\nfunction c8ql(strings) {\n  var bindVars = {};\n  var bindVals = [];\n  var query = strings[0];\n\n  for (var i = 0; i < (arguments.length <= 1 ? 0 : arguments.length - 1); i++) {\n    var rawValue = i + 1 < 1 || arguments.length <= i + 1 ? undefined : arguments[i + 1];\n    var value = rawValue;\n\n    if (isC8QLLiteral(rawValue)) {\n      query += \"\".concat(rawValue.toC8QL()).concat(strings[i + 1]);\n      continue;\n    }\n\n    var index = bindVals.indexOf(rawValue);\n    var isKnown = index !== -1;\n    var name = \"value\".concat(isKnown ? index : bindVals.length);\n\n    if (collection_1.isC8Collection(rawValue)) {\n      name = \"@\".concat(name);\n      value = rawValue.name;\n    }\n\n    if (!isKnown) {\n      bindVals.push(rawValue);\n      bindVars[name] = value;\n    }\n\n    query += \"@\".concat(name).concat(strings[i + 1]);\n  }\n\n  return {\n    query: query,\n    bindVars: bindVars\n  };\n}\n\nexports.c8ql = c8ql;\n\n(function (c8ql) {\n  c8ql.literal = function (value) {\n    return {\n      toC8QL: function toC8QL() {\n        return String(value);\n      }\n    };\n  };\n})(c8ql = exports.c8ql || (exports.c8ql = {}));","map":null,"metadata":{},"sourceType":"script"}